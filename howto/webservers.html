<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Python を Web 上で使うには &#8212; Python 2.7.13 ドキュメント</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.7.13',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Python 2.7.13 ドキュメント 内を検索"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Python 2.7.13 ドキュメント" href="../contents.html" />
    <link rel="up" title="Python HOWTO" href="index.html" />
    <link rel="next" title="Argparse チュートリアル" href="argparse.html" />
    <link rel="prev" title="urllib2 を使ってインターネット上のリソースを取得するには" href="urllib2.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    <link rel="canonical" href="https://docs.python.jp/3/howto/webservers.html" />
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script type="text/javascript" src="../_static/_jp.js"></script>
    
    <script type="text/javascript" src="../_static/version_switch.js"></script>
 
    

  </head>
  <body role="document">  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="argparse.html" title="Argparse チュートリアル"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="urllib2.html" title="urllib2 を使ってインターネット上のリソースを取得するには"
             accesskey="P">前へ</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="http://www.python.jp/">Python</a> &#187;</li>
        <li>
          <span class="version_switcher_placeholder">2.7.13</span>
          <a href="../index.html">ドキュメント</a> &#187;
        </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Python HOWTO</a> &#187;</li> 
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="howto-use-python-in-the-web">
<h1>Python を Web 上で使うには<a class="headerlink" href="#howto-use-python-in-the-web" title="このヘッドラインへのパーマリンク">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Marek Kubica</td>
</tr>
</tbody>
</table>
<div class="topic">
<p class="topic-title first">概要</p>
<p>このドキュメントは Python を web 向けに使う方法を示します。
Python を web サーバとともに利用するためのいくつかの方法や web サイトを開発する際の一般的なプラクティスを示します。</p>
</div>
<p>web サイトのコンテンツをユーザが作るということに焦点を当てた &#8220;Web 2.0&#8221; の提起以来 Web プログラミングは人気の話題となっています。
Python を使って web サイトを作れましたが、それはやや退屈な作業でした。そのため、開発者がサイトを速く、頑強に作るのを助けるために多くのフレームワークと補助ツールが作成されました。この HOWTO では動的なコンテンツを作成するために Python と web サーバを結合させるいくつかの方法について述べます。この話題は非常に広過ぎてドキュメント 1 つだけでは網羅しきれないため、この HOWTO を完全な入門書とするつもりはありません。ここでは最も人気のあるライブラリの簡単な概要を述べます。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">この HOWTO は Python を web 上で使う方法の概要を扱おうとしていますが、HOWTO が常に望みどおりに最新の状況を伝えられるわけではありません。
Python での web 開発は急速に発展しています、そのため Wiki ページ <a class="reference external" href="https://wiki.python.org/moin/WebProgramming">Web Programming</a> に多くの最新の開発に関する内容があるでしょう。</p>
</div>
<div class="section" id="the-low-level-view">
<h2>低レベルから見て<a class="headerlink" href="#the-low-level-view" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>ユーザが web サイトを訪れた時、ブラウザはサイトの web サーバとコネクションを形成します (これは <em>リクエスト</em> と呼ばれます)。サーバはファイルシステム上からファイルを探し出し、ユーザのブラウザにそれを送り返し、ブラウザが表示します (これが <em>レスポンス</em> です)。これが基礎となるプロトロル、HTTP のおおまかな動作です。</p>
<p>さて、動的な web サイトはファイルシステム上のファイルではなく、リクエストが来たときに web サーバが実行するプログラムの上に作られていて、このプログラムがユーザへ返すコンテンツを <em>生成</em> します。それらは掲示板の投稿を表示したり、メールを表示したり、ソフトウェアの設定や現在時刻の表示などの様々な便利なことができます。これらのプログラムはサーバがサポートするあらゆる言語で書くことができます。ほとんどのサーバが Python をサポートしているので、動的な web サイトを作成するのに Python を利用することは簡単です。</p>
<p>ほとんどの HTTP サーバは C や C++ で書かれていて、これらは Python コードを直接は実行できず、サーバとプログラムの間にブリッジが必要です。これらのブリッジやインターフェースはプログラムがサーバとどうやりとりするかを定めます。これまでに最良のインターフェースを作成するために膨大な数の試みがなされてきましたが、触れる価値のあるものはわずかです。</p>
<p>全ての web サーバが全てのインターフェースをサポートしているわけではありません。多くの web サーバは古い、現在では撤廃されたインターフェースのみをサポートしています; しかし、多くの場合にはサードパーティーモジュールを利用して新しいインターフェースをサポートするように拡張できます。</p>
<div class="section" id="common-gateway-interface">
<h3>Common Gateway Interface<a class="headerlink" href="#common-gateway-interface" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>一般に &#8220;CGI&#8221; と呼ばれるこのインターフェースは最も古く、ほとんどの web サーバでサポートされ、すぐに使うことができます。
CGI を利用して web サーバと通信するプログラムはリクエスト毎に起動される必要があります。そのため毎回のリクエストは新しい Python インタプリタを起動します &#8211; このため起動にいくらか時間がかかります &#8211; そしてこのインターフェースは負荷が低い状況にのみ向いています。</p>
<p>CGI の利点は単純だということです &#8211; CGI を利用するプログラムを書くのは3行のコードを書くだけです。しかし、この単純さは後で高くつきます; 開発者を少ししか助けてくれません。</p>
<p>CGI プログラムを書くことは可能ではありますが、もはや推奨されません。
<a class="reference internal" href="#wsgi"><span class="std std-ref">WSGI</span></a> (詳しくは後で述べます) では CGI をエミュレートするプログラムを書くことができるので、よりよい選択肢が選べない場合には CGI としてプログラムを実行できます。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>Python の標準ライブラリには簡素な CGI プログラムを作成するのを助けるいくつかのモジュールが含まれています:</p>
<ul class="simple">
<li><p class="first"><a class="reference internal" href="../library/cgi.html#module-cgi" title="cgi: Helpers for running Python scripts via the Common Gateway Interface."><code class="xref py py-mod docutils literal"><span class="pre">cgi</span></code></a> &#8211; CGI スクリプトでのユーザ入力を扱います</p>
</li>
<li><p class="first"><a class="reference internal" href="../library/cgitb.html#module-cgitb" title="cgitb: Configurable traceback handler for CGI scripts."><code class="xref py py-mod docutils literal"><span class="pre">cgitb</span></code></a> &#8211; CGI アプリケーションの中でエラーが発生した場合に、 &#8220;500 Internal Server Error&#8221; メッセージの代わりに親切なトレースバックを表示します</p>
</li>
</ul>
<p class="last">Python wiki では <a class="reference external" href="https://wiki.python.org/moin/CgiScripts">CGI scripts</a> にあるページに Python での CGI に関して追加情報を取り上げています。</p>
</div>
<div class="section" id="simple-script-for-testing-cgi">
<h4>CGI をテストするための単純なスクリプト<a class="headerlink" href="#simple-script-for-testing-cgi" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>CGI が web サーバで動くかどうかを調べるのに、この短く単純な CGI プログラムが利用できます:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>

<span class="c1"># enable debugging</span>
<span class="kn">import</span> <span class="nn">cgitb</span>
<span class="n">cgitb</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>

<span class="nb">print</span> <span class="s2">&quot;Content-Type: text/plain;charset=utf-8&quot;</span>
<span class="nb">print</span>

<span class="nb">print</span> <span class="s2">&quot;Hello World!&quot;</span>
</pre></div>
</div>
<p>web サーバの設定に依存して、このコードを <code class="docutils literal"><span class="pre">.py</span></code> もしくは <code class="docutils literal"><span class="pre">.cgi</span></code> 拡張子をつけたファイルに書く必要があります。それに加えて、セキュリティ上の理由のため、ファイルは <code class="docutils literal"><span class="pre">cgi-bin</span></code> フォルダ内に置く必要があるかもしれません。</p>
<p><code class="docutils literal"><span class="pre">cgitb</span></code> 行が何なのか疑問に思うかもしれません。この行は、クラッシュしてブラウザで &#8220;Internal Server Error&#8221; と表示する代わりに、親切なトレースバックを表示できるようにします。これはデバッグの際に便利ですが、いくつかの機密データをユーザにさらけ出すリスクにもなりえます。そういった理由で、スクリプトを完成品として利用する準備ができたら <code class="docutils literal"><span class="pre">cgitb</span></code> は使ってはいけません。さらに、<em>常に</em> 例外を捕捉し、適切なエラーページを表示するようにしなければいけません &#8211; エンドユーザは得体の知れない &#8220;Internal Server Errors&#8221; をブラウザで見ることを好みません。</p>
</div>
<div class="section" id="setting-up-cgi-on-your-own-server">
<h4>自身のサーバで CGI を立ち上げる<a class="headerlink" href="#setting-up-cgi-on-your-own-server" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>自身の web サーバを持っていない場合には、この内容は当てはまりません。そのままで動作するか調べることは可能で、もし動作しない場合は、とにかく web サーバの管理者と話し合う必要があります。大きなホストである場合、チケットに記入して Python サポートを求められるでしょう。</p>
<p>あなた自身が管理者であるか、自身のコンピュータで試すためにインストールしたい場合には自分自身で設定する必要があります。異なる設定オプションを持つ web サーバがたくさんあるため、CGI の設定法はひとつではありません。現在最も広く使われている web サーバは  <a class="reference external" href="http://httpd.apache.org/">Apache HTTPd</a> 、略して Apache です。
Apache はほぼ全てのシステムにパッケージ管理ツールを使って簡単にインストールできます。
<a class="reference external" href="http://www.lighttpd.net">lighttpd</a> はもう一つの選択肢で、パフォーマンスがより優れているといわれています。多くのシステムでこのサーバはパッケージ管理ツールを利用してインストールできるので、web サーバを手動でコンパイルする必要はないでしょう。</p>
<ul class="simple">
<li><p class="first">Apache ではチュートリアル <a class="reference external" href="http://httpd.apache.org/docs/2.2/howto/cgi.html">Dynamic Content with CGI</a> を参照でき、これには全てが解説されています。ほとんど場合には <code class="docutils literal"><span class="pre">+ExecCGI</span></code> を設定すれば十分です。このチュートリアルはよくでくわす可能性のある落し穴についても書かれています。</p>
</li>
<li><p class="first">lighttpd では <a class="reference external" href="http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs_ModCGI">CGI module</a> を使う必要があり、この設定は分かりやすいです。結局のところ、<code class="docutils literal"><span class="pre">cgi.assign</span></code> を適切に設定することになります。</p>
</li>
</ul>
</div>
<div class="section" id="common-problems-with-cgi-scripts">
<h4>CGI スクリプトでの一般的な問題<a class="headerlink" href="#common-problems-with-cgi-scripts" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>CGI を利用していると、スクリプトを走らせようとするときにちょっといらいらすることがときどきあります。あるときは一見正しいスクリプトが期待どおりに動かないことがあり、気付くのが難しい小さな隠れた問題が原因だったりします。</p>
<p>いくつかの潜在的な問題は次の通りです:</p>
<ul class="simple">
<li><p class="first">Python スクリプトが実行可能でない。
CGI スクリプトが実行可能でないとき、多くの web サーバは実行しユーザに出力を送る代わりに、ユーザがダウンロードできるようにします。
CGI スクリプトが Unix 系 OS で適切に実行されるために <code class="docutils literal"><span class="pre">+x</span></code> ビットが設定される必要があります。
<code class="docutils literal"><span class="pre">chmod</span> <span class="pre">a+x</span> <span class="pre">your_script.py</span></code> を使うことで問題は解決するでしょう。</p>
</li>
<li><p class="first">Unix 系システムでは、プログラムファイルの行末は Unix 形式でなければなりません。
web サーバはスクリプト最初の行 (shebang と呼ばれます) を調べ、そこで指定されたプログラムを実行しようとするため、ここが重要なのです。これは Windows の行末 (Carriage Return &amp; Line Feed、または CRLF) によって簡単に混乱させられるので、ファイルの行末を Unix の行末 (Line Feed, LF のみ) に変換する必要があります。これは FTP 経由でバイナリモードではなくテキストモードでファイルをアップロードすると自動的に行なわれますが、単に Unix 行末で保存するようテキストエディタに指示する方が望ましいです。ほとんどのエディタはこの機能をサポートしています。</p>
</li>
<li><p class="first">web サーバはファイルが読めなければならないので、パーミッションが適切になっているか確認する必要があります。
Unix 系システムでは、サーバはしばしば <code class="docutils literal"><span class="pre">www-data</span></code> ユーザ、 <code class="docutils literal"><span class="pre">www-data</span></code> グループのパーミッションで実行されているので、ファイルの所有権を変更したり、 <code class="docutils literal"><span class="pre">chmod</span> <span class="pre">a+r</span> <span class="pre">your_script.py</span></code> を使いファイルを誰からでも読み込み可能にしたりするのは試す価値があります。</p>
</li>
<li><p class="first">web サーバはアクセスを試みているファイルが CGI スクリプトであるということを知っていなければなりません。
web サーバが CGI スクリプトに対し、ある特定のファイル拡張子を持つことを要求するよう設定されていないか設定を確認して下さい。</p>
</li>
<li><p class="first">Unix 系システムでは、 shebang にあるインタプリタへのパス (<code class="docutils literal"><span class="pre">#!/usr/bin/env</span> <span class="pre">python</span></code>) は正確でなければなりません。この行は Python を見つけるために <code class="docutils literal"><span class="pre">/usr/bin/env</span></code> を呼び出しますが、<code class="docutils literal"><span class="pre">/usr/bin/env</span></code> が無いか Python が web サーバのパスに無い場合は失敗します。
Python がどこにインストールされているか分かっている場合、そのフルパスを使うこともできます。
<code class="docutils literal"><span class="pre">whereis</span> <span class="pre">python</span></code> コマンドと <code class="docutils literal"><span class="pre">type</span> <span class="pre">-p</span> <span class="pre">python</span></code> コマンドも Python がどこにインストールされたかを探すのに役立つでしょう。一旦パスが分かれば、shebang 行をそれに応じて変更できます: <code class="docutils literal"><span class="pre">#!/usr/bin/python</span></code>。</p>
</li>
<li><p class="first">ファイルは BOM (Byte Order Mark) を含んでいてはいけません。
BOM は UTF-16 と UTF-32 エンコーディングのバイト順を決定するのに利用されますが、あるエディタは UTF-8 ファイルにも BOM を書き込むことがあります。
BOM は shebang 行に影響するので、エディタが BOM を書き込まないようにしてください。</p>
</li>
<li><p class="first">web サーバが <a class="reference internal" href="#mod-python"><span class="std std-ref">mod_python</span></a> を使っている場合、 <code class="docutils literal"><span class="pre">mod_python</span></code> が問題となることがあります。
<code class="docutils literal"><span class="pre">mod_python</span></code> はそれ自身で CGI スクリプトを扱うことができますが、そのことが問題の原因となることがあります。</p>
</li>
</ul>
</div>
</div>
<div class="section" id="mod-python">
<span id="id1"></span><h3>mod_python<a class="headerlink" href="#mod-python" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>PHP から来た人達はしばしば、Python を web 上で利用する方法を把握するのに苦労します。彼らが最初に考えるのはたいてい <a class="reference external" href="http://modpython.org/">mod_python</a> のことで、それは <code class="docutils literal"><span class="pre">mod_python</span></code> が <code class="docutils literal"><span class="pre">mod_php</span></code> と同等のものだと考えるからです。しかし実際にはたくさんの相違点があります。
<code class="docutils literal"><span class="pre">mod_python</span></code> が行なうことは Apache プロセスへのインタプリタの埋め込みで、そのためリクエストごとに Python インタプリタを起動させる必要が無いので、リクエストに対する速度が向上します。一方で PHP でよくやるような「HTML への Python の埋め込み」とはかけ離れています。
Python でそれと同等なことをするのはテンプレートエンジンです。
<code class="docutils literal"><span class="pre">mod_python</span></code> 自身はより強力で Apache 内部に対してより多くのアクセスを提供します。
CGI をエミュレートし、JSP に似た「HTML への Python 埋め込み」である &#8220;Python Server Pages&#8221; モードで動作でき、全てのリクエストを一つのファイルで受け付けて何を実行するを決める &#8220;Publisher&#8221; を持っています。</p>
<p>しかし、<code class="docutils literal"><span class="pre">mod_python</span></code> はいくつかの問題も抱えています。
PHP インタプリタと違い Python インタプリタはファイル実行時にキャッシュを利用するため、ファイルの変更時にはアップデートするには web サーバ全体を再起動する必要があります。もう一つの問題は基本的なコンセプトにあります &#8211; Apache はリクエストを扱うためにいくつかの子プロセスを起動し、不幸にも全ての子プロセスが Python インタプリタ全体を、利用しない場合であっても、読み込む必要があるのです。このせいで web サーバ全体が遅くなります。別の問題は <code class="docutils literal"><span class="pre">mod_python</span></code> は特定のバージョンの <code class="docutils literal"><span class="pre">libpython</span></code> に対してリンクされるため、<code class="docutils literal"><span class="pre">mod_python</span></code> を再コンパイルせずに古いバージョンから新しいバージョンに切り替える (例えば 2.4 から 2.5) ことはできません。さらに <code class="docutils literal"><span class="pre">mod_python</span></code> は Apache web サーバとも結び付いているため <code class="docutils literal"><span class="pre">mod_python</span></code> 用に書かれたプログラムは他の web サーバで簡単に動かすことはできません。</p>
<p>これらが新しくプログラムを書く際に <code class="docutils literal"><span class="pre">mod_python</span></code> を避けるべき理由です。いくつかの状況では <code class="docutils literal"><span class="pre">mod_python</span></code> を利用するのはよいアイデアでしょうが、WSGI は <code class="docutils literal"><span class="pre">mod_python</span></code> 下でも WSGI プログラムを同様に動かせます。</p>
</div>
<div class="section" id="fastcgi-and-scgi">
<h3>FastCGI と SCGI<a class="headerlink" href="#fastcgi-and-scgi" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>FastCGI と SCGI は CGI のパフォーマンス上の問題を別の方法で解決しようという試みです。
web サーバにインタプリタを組み込む代わりに、バックグラウンドで長時間実行されるプロセスを生成します。さらに web サーバ上にはいくつかのモジュールがあり、それらは web サーバとバックグラウンドプロセスが「話す」ことを可能にします。バックグラウンドプロセスはサーバと独立しているため、 Python を含んだ、任意の言語で書くことができます。言語に必要なのは web サーバとの通信を扱うライブラリだけです。</p>
<p>FastCGI と SCGI の違いはささいなもので、SCGI は基本的に &#8220;simpler FastCGI&#8221; です。しかし、SCGI をサポートする web サーバは限定されているため、多くの人々は代わりに同様に動作する FastCGI を利用します。SCGI に適用されるほとんど全てのものは FastCGI にも適用できるので、 FastCGI だけについて解説します。</p>
<p>最近では FastCGI を直接使うことはありません。
<code class="docutils literal"><span class="pre">mod_python</span></code> のように WSGI アプリケーションの配置のためだけに FastCGI が利用されています。</p>
<div class="section" id="setting-up-fastcgi">
<h4>FastCGI のセットアップ<a class="headerlink" href="#setting-up-fastcgi" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>web サーバに応じて特別なモジュールが必要となります。</p>
<ul class="simple">
<li><p class="first">Apache には <a class="reference external" href="http://www.fastcgi.com/drupal/">mod_fastcgi</a> と <a class="reference external" href="https://httpd.apache.org/mod_fcgid/">mod_fcgid</a> の両方があります。<code class="docutils literal"><span class="pre">mod_fastcgi</span></code> が最初に作られましたが、非フリーとして扱われるという、いくつかのライセンスの問題があります。<code class="docutils literal"><span class="pre">mod_fcgid</span></code> はより小さく、前者と互換性があります。このうちのどちらかを Apache から読み込む必要があります。</p>
</li>
<li><p class="first">lighttpd は自身に <a class="reference external" href="http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs_ModFastCGI">FastCGI module</a> を含んでいて、<a class="reference external" href="http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs_ModSCGI">SCGI module</a> も同様に含んでいます。</p>
</li>
<li><p class="first"><a class="reference external" href="http://nginx.org/">nginx</a> も <a class="reference external" href="https://www.nginx.com/resources/wiki/start/topics/examples/simplepythonfcgi/">FastCGI</a> をサポートしています。</p>
</li>
</ul>
<p>一旦モジュールをインストールして設定したら、以下の WSGI アプリケーションを使ってテストできます:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>

<span class="kn">from</span> <span class="nn">cgi</span> <span class="k">import</span> <span class="n">escape</span>
<span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">flup.server.fcgi</span> <span class="k">import</span> <span class="n">WSGIServer</span>

<span class="k">def</span> <span class="nf">app</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">start_response</span><span class="p">):</span>
    <span class="n">start_response</span><span class="p">(</span><span class="s1">&#39;200 OK&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;text/html&#39;</span><span class="p">)])</span>

    <span class="k">yield</span> <span class="s1">&#39;&lt;h1&gt;FastCGI Environment&lt;/h1&gt;&#39;</span>
    <span class="k">yield</span> <span class="s1">&#39;&lt;table&gt;&#39;</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">environ</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="k">yield</span> <span class="s1">&#39;&lt;tr&gt;&lt;th&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">escape</span><span class="p">(</span><span class="n">k</span><span class="p">),</span> <span class="n">escape</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
    <span class="k">yield</span> <span class="s1">&#39;&lt;/table&gt;&#39;</span>

<span class="n">WSGIServer</span><span class="p">(</span><span class="n">app</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>これは単純な WSGI アプリケーションですが、まず <a class="reference external" href="https://pypi.python.org/pypi/flup/1.0">flup</a> をインストールする必要があります。
flup は低レベルの FastCGI アクセスを取り扱います。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last"><a class="reference external" href="https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/">setting up Django with WSGI</a> にドキュメントがあり、その多くは WSGI 互換フレームワークやライブラリで再利用できます。
<code class="docutils literal"><span class="pre">manage.py</span></code> の部分を変更するだけで、ここで使った例を利用できます。
Django もほとんど同様のことを行います。</p>
</div>
</div>
</div>
<div class="section" id="mod-wsgi">
<h3>mod_wsgi<a class="headerlink" href="#mod-wsgi" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference external" href="http://code.google.com/p/modwsgi/">mod_wsgi</a> は低レベルなゲートウェイから脱するための試みです。
FastCGI、SCGI、mod_python は主に WSGI アプリケーションを配置するために使われると仮定し、mod_wsgi は WSGI アプリケーションを直接 Apache web サーバに埋め込むために開発が開始されました。
mod_wsgi は WSGI アプリケーションをホストするために特別に設計されています。これにより WSGI アプリケーションの配置は、グルーコードが必要な他の低レベルな手法を使った配置よりも非常に簡単になります。
mod_wsgi の欠点は Apache web サーバに制限されてしまうことです; 他のサーバではそれ用の mod_wsgi の実装が必要になるでしょう。</p>
<p>mod_wsgi は2つのモードをサポートします: 埋め込みモード (embeded mode) は Apache プロセスとデーモンプロセスを統合するもので、 FastCGI に似ています。
FastCGI と違って、 mod_wsgi はそれ自身がワーカープロセスを取り扱うので管理が楽になります。</p>
</div>
</div>
<div class="section" id="step-back-wsgi">
<span id="wsgi"></span><h2>後ろに下って: WSGI<a class="headerlink" href="#step-back-wsgi" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>WSGI について何度も言及してきたため、なにか重要そうに感じたでしょう。実際に重要なので、ここで説明します。</p>
<p><em>Web Server Gateway Interface</em> 、略して WSGI は <span class="target" id="index-2"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0333"><strong>PEP 333</strong></a> で定義されていて、現在のところ Python で web プログラミングをする最良の方法です。
WSGI はフレームワークを書くプログラマにとっては優れている一方、普通の web プログラマが直接触れる必要の無いものです。
web 開発のフレームワークを選ぶときに、 WSGI をサポートしているもの選ぶことは素晴しい考えです。</p>
<p>WSGI の大きな利点は、アプリケーションプログラミングインターフェース (API) が統一されることです。プログラムが WSGI と互換性があれば &#8211; これは外部から見たときにフレームワークが WSGI をサポートしているということになります &#8211; そのプログラムは WSGI ラッパーのある全ての web サーバインターフェースを通して利用できます。ユーザが mod_python や FastCGI や mod_wsgi のうちどれを利用しているかを気にせずにすみます &#8211; WSGI を使うことで任意ゲートウェイインターフェース上で動作するようになります。
Python 標準ライブラリには、テストのために利用できる小さな web サーバである、独自の WSGI サーバ <a class="reference internal" href="../library/wsgiref.html#module-wsgiref" title="wsgiref: WSGI Utilities and Reference Implementation."><code class="xref py py-mod docutils literal"><span class="pre">wsgiref</span></code></a> が含まれています。</p>
<p>WSGI の本当に卓越している機能はミドルウェアです。ミドルウェアとはプログラムに様々な機能性を加えられるレイヤーのことを指します。無数の <a class="reference external" href="https://wsgi.readthedocs.org/en/latest/libraries.html">ミドルウェア</a> が利用可能になっています。例えば自前でセッション管理を書く (HTTP はステートレスなプロトコルなので、複数の HTTP リクエストを単一のユーザに関連付けるために、アプリケーションがセッションによって状態を作成し管理しなければなりません) 代わりに、セッション管理をしてくれるミドルウェアをダウンロードし、動作させ、アプリケーション独自の部分をコーディングするだけです。圧縮についても同じです &#8211; HTML の gzip 圧縮をする既存のミドルウェアがあって、これでサーバの帯域を節約できます。認証も既存のミドルウェアで簡単に解決できる問題です。</p>
<p>WSGI は複雑に思えるかもしれませんが、学習の始めの段階は非常に価値ものになります。というのも WSGI とそれに関連したミドルウェアには、 web サイトを開発している中で起きる多くの問題の解決策が備わっています。</p>
<div class="section" id="wsgi-servers">
<h3>WSGI サーバ<a class="headerlink" href="#wsgi-servers" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>CGI や mod_python などの様々な低レベルゲートウェイに接続するためのコードを <em>WSGI サーバ</em> と呼びます。こういったサーバの一つに <code class="docutils literal"><span class="pre">flup</span></code> があり、これは FastCGI、SCGI に加えて <a class="reference external" href="https://en.wikipedia.org/wiki/Apache_JServ_Protocol">AJP</a> もサポートしています。これらのサーバのいくつかは <code class="docutils literal"><span class="pre">flup</span></code> のように Python で書かれていますが、C で書かれたものもあり、それらは気軽に置き換えることができます。</p>
<p>多くのサーバが既に利用可能なので、 Python の web アプリケーションはほとんどどこにでも配置できます。これは他の web テクノロジーと比べたときの Python の大きな利点の 1 つです。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p><a class="reference external" href="https://wsgi.readthedocs.org/">WSGI homepage</a> では WSGI 関係のコードの素晴しい概要が読め、 WSGI をサポートする <em>全ての</em> アプリケーションが利用できる <a class="reference external" href="https://wsgi.readthedocs.org/en/latest/servers.html">WSGI サーバ</a> の広大なリストがあります。</p>
<p>標準ライブラリに含まれる WSGI をサポートするモジュールに興味が湧いたかもしれません、すなわちこのモジュールのことです:</p>
<ul class="last simple">
<li><p class="first"><a class="reference internal" href="../library/wsgiref.html#module-wsgiref" title="wsgiref: WSGI Utilities and Reference Implementation."><code class="xref py py-mod docutils literal"><span class="pre">wsgiref</span></code></a> &#8211; WSGI のためのいくつかの小さなユーティリティとサーバ</p>
</li>
</ul>
</div>
</div>
<div class="section" id="case-study-moinmoin">
<h3>事例研究: MoinMoin<a class="headerlink" href="#case-study-moinmoin" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>WSGI は web アプリケーションプログラマに何をもたらしてくれるのでしょうか?
WSGI を使わずに Python で書かれた昔からある web アプリケーションをみてみましょう。</p>
<p>最も広く使われている wiki ソフトウェアパッケージの一つに <a class="reference external" href="https://moinmo.in/">MoinMoin</a> があります。これは2000年に作られたため、WSGI より3年ほど先行していました。古いバージョンでは CGI、mod_python、FastCGI、スタンドアロンで動作するためには別々のコードが必要でした。</p>
<p>現在では WSGI をサポートしています。
WSGI を使うことで、グルーコードを追加せずに WSGI に準拠したサーバに MoinMoin を配置できるようになりました。
WSGI 対応前のバージョンとは違って、 MoinMoin の開発者が全く知らない WSGI サーバを MoinMoin に含めることができます。</p>
</div>
</div>
<div class="section" id="model-view-controller">
<h2>モデル・ビュー・コントローラ (Model-View-Controller)<a class="headerlink" href="#model-view-controller" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><em>MVC</em> という用語は「フレームワーク <em>foo</em> は MVC をサポートしています」というような文句でよく聞きます。
MVC は特定の API というよりは、コードの総合的な構造についての話です。多くの web フレームワークはこのモデルを使い、開発者がプログラムに構造を与えることを助けています。大きな web アプリケーションはコード量が増えるので、最初からプログラムによい構造を持たせることはよい考えです。そうすることで、他のフレームワークのユーザであっても (MVC は Python 特有のものではないので、他の言語であっても)、既に MVC 構造に馴染んでいるため、コードを簡単に理解できます。</p>
<p>MVC は 3 つの構成要素からできています:</p>
<ul class="simple">
<li><p class="first"><em>モデル</em> (model) 。これは表示したり変更されたりするデータのことです。
Python のフレームワークでは、この要素は object-relational マッパーが利用するクラスで表現されます。</p>
</li>
<li><p class="first"><em>ビュー</em> (view) 。この構成要素の仕事は、モデルのデータをユーザに表示することです。典型的にはこの要素はテンプレートで実装されます。</p>
</li>
<li><p class="first"><em>コントローラ</em> (controller) 。これはユーザとモデルの間にあるレイヤーです。コントローラは (ある特定の URL を開くというような) ユーザの動作に反応し、必要に応じてモデルにデータを変更するよう伝え、ビューのコードに何を表示するかを伝えます。</p>
</li>
</ul>
<p>MVC を複雑なデザインパターンだと考える人もいるかもしれませんが、実際はそうではありません。Python で使われているのは、それがきれいで保守可能な web サイトを作成するのに便利だということがわかっているからです。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">全ての Python フレームワークが明示的に MVC をサポートしているわけではありませんが、データロジック (モデル) とユーザとのインタラクションロジック (コントローラ) とテンプレート (ビュー) を分離して、 MVC パターンを使っている web サイトを作成することは普通のことです。その理由はテンプレートに不必要な Python コードを書かないことが重要なことだからです &#8211;  そのようなコードは MVC に反する動作をして大混乱を生み、それを理解して修正することがいっそう難しくなります。</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">Wikipedia の英語版には <a class="reference external" href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">Model-View-Controller pattern</a> についての記事があります。この記事には様々なプログラミング言語での web フレームワークの長大なリストが載っています。</p>
</div>
</div>
<div class="section" id="ingredients-for-websites">
<h2>web サイトの要素<a class="headerlink" href="#ingredients-for-websites" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>web サイトは複雑な構造物なので、 web 開発者がコードを書きやすく、保守しやすくする助けとなるツールが作られてきました。このようなツールは、全ての言語の全ての web フレームワークについて存在します。開発者はこれらのツールを強制的に使わされるわけではないし、「最良の」ツールはたいていは存在しません。しかし、これらの利用可能なツールは web サイトの開発プロセスを非常に単純にしてくれるので、学ぶ価値はあります。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">このドキュメントで述べられるよりも多くの要素があります。
Python wiki には <a class="reference external" href="https://wiki.python.org/moin/WebComponents">Web Components</a> と呼ばれる、これらの要素についてのページがあります。</p>
</div>
<div class="section" id="templates">
<h3>テンプレート<a class="headerlink" href="#templates" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>HTML と Python コードを混在させることは、いくつかのライブラリを利用することで可能になります。最初は便利なのですが、こうしてしまうとコードが恐ろしく保守不可能となります。これがテンプレートが存在する理由です。テンプレートは、最も単純な場合には、単にプレースホルダーを持つ HTML ファイルとなります。プレースホルダーを埋めた後に HTML はユーザのブラウザに送信されます。</p>
<p>Python には既に単純なテンプレートを作る 2つの手段があります:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello </span><span class="si">%s</span><span class="s2">!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">template</span> <span class="o">%</span> <span class="s2">&quot;Reader&quot;</span>
<span class="go">&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello Reader!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">string</span> <span class="k">import</span> <span class="n">Template</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&quot;&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello $</span><span class="si">{name}</span><span class="s2">&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">template</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Dinsdale&#39;</span><span class="p">))</span>
<span class="go">&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello Dinsdale!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;</span>
</pre></div>
</div>
<p>単純でないモデルのデータに基づいて複雑な HTML を生成するために、たいてい Python の <em>for</em> や <em>if</em> のような条件分岐や反復といった構造が必要とされます。
<em>テンプレートエンジン</em> はこのような複雑さを持つテンプレートをサポートします。</p>
<p>Python には多くのテンプレートエンジンがあり、<a class="reference internal" href="#framework">framework</a> とともに、または独立に利用できます。いくつかのテンプレートエンジンでは、利用用途を狭めて学びやすくしてあるプレーンテキストのプログラミング言語を定義しています。他のテンプレートエンジンでは XML を利用しているものもあり、テンプレートの出力が常に有効な XML になるよう保証されています。これ以外にも非常に多くの種類があります。</p>
<p>独自のテンプレートエンジンを提供する <a class="reference internal" href="#frameworks">frameworks</a> もあれば、ある特定のテンプレートエンジンを推奨するものもあります。別のテンプレートエンジンを使う理由が無ければ、フレームワークが提供もしくは推奨するものを使うのがよい考えです。</p>
<p>人気のあるテンプレートエンジンには次のようなものがあります:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://www.makotemplates.org/">Mako</a></li>
<li><a class="reference external" href="http://genshi.edgewall.org/">Genshi</a></li>
<li><a class="reference external" href="http://jinja.pocoo.org/">Jinja</a></li>
</ul>
</div></blockquote>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">たくさんのテンプレートエンジンが注目を集めようと競っています。というのも、 Python でテンプレートエンジンを作るのが非常に簡単だからです。
wiki の <a class="reference external" href="https://wiki.python.org/moin/Templating">Templating</a> ページには、大量の今も増え続けるテンプレートエンジンの一覧が載っています。上で挙げた 3 つのテンプレートエンジンは &#8220;次世代の&#8221; テンプレートエンジンと見なされていて、始めるのに良いものです。</p>
</div>
</div>
<div class="section" id="data-persistence">
<h3>データの永続化<a class="headerlink" href="#data-persistence" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><em>データの永続化 (data persistence)</em> とは非常に複雑に聞こえますが、単にデータを保存するだけです。このデータはブログエントリのテキストだったり、掲示板の投稿だったり、wiki ページのテキストだったりします。もちろん、 web サーバに情報を保存するたくさんの様々な方法があります。</p>
<p>しばしば <a class="reference external" href="http://www.mysql.com/">MySQL</a> や <a class="reference external" href="http://www.postgresql.org/">PostgreSQL</a> のような関係データベースエンジンが利用されます。それは数百万エントリに及ぶ非常に大きなデータベースを優れたパフォーマンスで扱うことができるためです。<a class="reference external" href="http://www.sqlite.org/">SQLite</a> と呼ばれる小さなデータベースエンジンもあり、これは <a class="reference internal" href="../library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code class="xref py py-mod docutils literal"><span class="pre">sqlite3</span></code></a> モジュールによって Python にバンドルされていて、ファイルを一つだけしか使いません。これ以外の依存関係はありません。小さめのサイトに対しては SQLite で十分です。</p>
<p>関係データベースには <a class="reference external" href="https://en.wikipedia.org/wiki/SQL">SQL</a> と呼ばれる言語を利用して <em>問い合わせ (query)</em> ます。一般的に Python プログラマは SQL があまり好きではなく、オブジェクトで動作する方を好みます。
<a class="reference external" href="https://en.wikipedia.org/wiki/Object-relational_mapping">ORM</a> (Object Relational Mapping) と呼ばれる技術を使うことで、 Python オブジェクトをデータベースに保存できます。
ORM は内部でオブジェクト指向的アクセスを SQL コードに変換するので、ユーザはそのことを意識せずに済みます。ほとんどの <a class="reference internal" href="#framework">framework</a> は ORMs を利用し、とてもうまくいっています.</p>
<p>第2の可能性は通常のプレーンテキストのファイル (しばしば &#8220;フラットファイル&#8221; と呼ばれます) で保存することです。この方法は単純なサイトでは非常に簡単ですが、 web サイトが保存されたデータへの更新がたくさん行われる場合、ちゃんと動くようにするのは難しくなってきます。</p>
<p>第3の可能性はオブジェクト指向データベースです (&#8220;オブジェクトデータベース&#8221; とも呼ばれます)。このデータベースは、プログラムの実行中のメモリ上での構成とほぼ同じ形式でオブジェクトのデータを保存します。
(対照的に、 ORM はオブジェクトデータをテーブルの行と行どうしの関係として保存します。)
オブジェクトを直接保存することには、ほぼ全てのオブジェクトを単純な方法で保存できるという優位点があり、これは表現するのが非常に難しいオブジェクトがある関係データベースには無い特徴です。</p>
<p><a class="reference internal" href="#framework">framework</a> はしばしばどのデータストレージ方法を選べばよいかのヒントを与えてくれます。代わりとなるストレージ機構を使った方がアプリケーションの特別な要件によりよく合うのでない限り、普通はフレームワークが推奨しているデータストアを使い続けるのがよい考えです。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<ul class="last simple">
<li><p class="first"><a class="reference external" href="https://wiki.python.org/moin/PersistenceTools">Persistence Tools</a> にはファイルシステムにデータを保存する方法が列挙されています、これらのモジュールの内のいくつかは標準ライブラリの一部です</p>
</li>
<li><p class="first"><a class="reference external" href="https://wiki.python.org/moin/DatabaseProgramming">Database Programming</a> はデータ保存の方法を選ぶのを助けてくれます</p>
</li>
<li><p class="first"><a class="reference external" href="http://www.sqlalchemy.org/">SQLAlchemy</a> は Python 用の最も強力な OR マッパーで、<a class="reference external" href="https://pypi.python.org/pypi/Elixir">Elixir</a> は SQLAlchemy を使いやすくします</p>
</li>
<li><p class="first"><a class="reference external" href="http://www.sqlobject.org/">SQLObject</a> は別の人気のある OR マッパーです</p>
</li>
<li><p class="first"><a class="reference external" href="https://launchpad.net/zodb">ZODB</a> と <a class="reference external" href="https://www.mems-exchange.org/software/">Durus</a> の二つはオブジェクト指向データベースです</p>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="frameworks">
<span id="framework"></span><h2>フレームワーク<a class="headerlink" href="#frameworks" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>web サイトを動かずコードを作成するプロセスは様々なサービスを提供するコードを書く作業を伴います。あるサービスを提供するコードは、当該の web サイトの複雑さや目的に関わらず、たいてい同じような動作をします。共通のソリューションを抽象化し再利用可能なコードにすると、 web 開発で &#8220;フレームワーク&#8221; と呼ばれるものが生み出されます。おそらく最も知られている web 開発のフレームワークは Ruby on Rails ですが、 Python には独自のフレームワークがあります。その中には部分的に Rails にインスパイアされたり、アイディアを拝借したものもありましたが、多くのものは Rails よりずっと前から存在していました。</p>
<p>もともと Python の web フレームワークには、 web サイトを開発するのに必要な全てのサービスを1つにまとめて、巨大な集約されたツールの集まりを作る傾向がありました。どの2つの web フレームワークも互換性はありませんでした:
あるフレームワーク用に開発したプログラムは、かなりの再設計作業をしないと他のフレームワークには配置できませんでした。この状況が &#8220;ミニマリスト&#8221; web フレームワークの開発につながり、そういったフレームワークは Python コードと http プロトコルの間のやり取りをするツールだけを提供し、他の全てのサービスを別々のコンポーネントとしてフレームワーク上に追加するものでした。場当たり的な標準が開発され、制限はあるものの、異なるテンプレートエンジンを交換可能にする標準のような、フレームワークどうしの互換性も生まれました。</p>
<p>WSGI の出現から Python の web フレームワークの世界は、 WSGI 標準に基づいた互換性に向かって進化していきました。
(最も複雑な web サイトを配置するのに必要な全てのツールを提供する) &#8220;フルスタック&#8221; であれ、ミニマリストであれ、その中間であれ、今や多くの web フレームワークが複数のフレームワークで使える再利用可能なコンポーネントで構築されています。</p>
<p>大多数のユーザはおそらくコミュニティが活発な &#8220;フルスタック&#8221; フレームワークを選びたいでしょう。これらのフレームワークはきちんとドキュメントが書かれ、機能を完全に揃えた web サイトを最小の時間で作る簡単な道が提供されている傾向があります。</p>
<div class="section" id="some-notable-frameworks">
<h3>いくつかの注目に値するフレームワーク<a class="headerlink" href="#some-notable-frameworks" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>膨大な数のフレームワークがあるので、全てについて記述することは不可能です。その代わりに最も人気のあるもののいくつかに簡単に触れます。</p>
<div class="section" id="django">
<h4>Django<a class="headerlink" href="#django" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><a class="reference external" href="https://www.djangoproject.com/">Django</a> は、一から書かれた非常に上手く連携するいくつかの要素を固く結び付けて構成されたフレームワークです。
Django には非常に強力でシンプルに使える ORM があり、ブラウザでデータベースのデータを編集できる優れたオンラインの管理インターフェースがあります。テンプレートエンジンはテキストベースで Python が書けないページデザイナーにも使えるよう設計されています。このテンプレートエンジンはテンプレートの継承と (Unix のパイプのように動作する) フィルタをサポートしています。
Django には RSS フィードや汎用ビュー (generic view) のようなたくさんの使いやすい機能が付属しているため、 Python コードをほとんど書かずに web サイトを作ることができるようになっています。</p>
<p>Django には、多くの web サイトを作成してきたメンバーによる、大きな国際的なコミュニティがあります。
Django の通常の機能を拡張するたくさんのアドオンプロジェクトもあります。これらは Django の素晴しい <a class="reference external" href="https://docs.djangoproject.com/">オンラインドキュメント</a> と <a class="reference external" href="http://www.djangobook.com/">Django book</a> による部分もあります。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Django は MVC スタイルのフレームワークですが、 Django は構成要素に対して別の名前を付けています。これについては <a class="reference external" href="https://docs.djangoproject.com/en/dev/faq/general/#django-appears-to-be-a-mvc-framework-but-you-call-the-controller-the-view-and-the-view-the-template-how-come-you-don-t-use-the-standard-names">Django FAQ</a> で解説されています。</p>
</div>
</div>
<div class="section" id="turbogears">
<h4>TurboGears<a class="headerlink" href="#turbogears" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Python の他に人気あるフレームワークは <a class="reference external" href="http://www.turbogears.org/">TurboGears</a> です。これは既存の要素と継ぎ目ををなくすためグルーコードを使ってそれらを組み合わせるアプローチをとっています。TurboGears はユーザが自由に要素を選べるようにしていて、ORM は制限が多い代わり使いやすいもの、複雑だが強力なもの、に切り替えて使うことができます。テンプレートエンジンにも同様のことがいえます。TurboGears の強力な点は、構成要素が他のプロジェクトでも TurboGears への依存無しに簡単に利用できるということです、例えば TurboGears を支えている web サーバ CherryPy もそうです。</p>
<p>ドキュメントが <a class="reference external" href="https://turbogears.readthedocs.org/">TurboGears documentation</a> にあり、スクリーンキャストへのリンクもあります。TurboGears には関連した質問のほとんどに答えられる、活動的なユーザコミュニティがあります。入門に向いた <a class="reference external" href="http://turbogears.org/1.0/docs/TGBooks.html">TurboGears book</a> も出版されています。</p>
<p>次の TurboGears のメジャーバージョン version 2.0 での計画では、<a class="reference external" href="http://www.pylonsproject.org/">Pylons</a> と呼ばれる別の柔軟なフレームワークによって提供される、より柔軟な基本要素に切り替えることになっています。</p>
</div>
<div class="section" id="zope">
<h4>Zope<a class="headerlink" href="#zope" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>そのうちの一つは既に言及しましたが Zope です、このフレームワークはずいぶんと長い期間にわたって存在しています。Zope 2.x はどちらかというと Pythonic でないとされてきましたが、新しい Zope 3.x ではその変更を試みて、Python プログラマから受け入れられ始めています。これらの努力は既に結果をみせ始めていて、<a class="reference external" href="http://repoze.org/">Repoze</a> と呼ばれる Zope と WSGI を結びつけるプロジェクトや <a class="reference external" href="http://grok.zope.org/">Grok</a> と呼ばれる Zope の熟慮された要素を「普通の」Python プログラマが使えるようにするためのプロジェクトがあります。</p>
<p>Zope は <a class="reference external" href="https://plone.org/">Plone</a> によって利用されているインフラストラクチャでもあります。Plone は利用可能な中でもっとも強力で人気のあるコンテンツ管理システムの一つです。</p>
</div>
<div class="section" id="other-notable-frameworks">
<h4>他の注目に値するフレームワーク<a class="headerlink" href="#other-notable-frameworks" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>もちろんこれらの二つだけが利用できるフレームワーク全てではありません、人気では少し劣りますが、言及するに値するフレームワークがいくつかあります。</p>
<p>既に述べた別のフレームワークに <a class="reference external" href="http://www.pylonsproject.org/">Pylons</a> がありました。Pylons は TurboGears とよく似ていますが、柔軟性に磨きがかかっていて、利用するコストが少々高くつきます。ほとんど全ての要素は交換することができるため、それぞれの要素について、ドキュメントを利用するこが避けられません、なぜなら各必要条件を満す Pylons の組み合わせの可能性は本当にたくさんあるのです。Pylons は WSGI を扱いやすくするための広範囲なツールである、<a class="reference external" href="http://pythonpaste.org/">Paste</a> を基にして組まれています。</p>
<p>これで全てが述べられたわけではありません。最新の情報の多くは Python wiki で見つけることができます。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>Python wiki には広大な <a class="reference external" href="https://wiki.python.org/moin/WebFrameworks">web frameworks</a> のリストがあります。</p>
<p class="last">多くのフレームワークは独自のメーリングリストや IRC チャンネルを持っています、プロジェクトの web サイトからそれらを探して下さい。</p>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">Python を Web 上で使うには</a><ul>
<li><a class="reference internal" href="#the-low-level-view">低レベルから見て</a><ul>
<li><a class="reference internal" href="#common-gateway-interface">Common Gateway Interface</a><ul>
<li><a class="reference internal" href="#simple-script-for-testing-cgi">CGI をテストするための単純なスクリプト</a></li>
<li><a class="reference internal" href="#setting-up-cgi-on-your-own-server">自身のサーバで CGI を立ち上げる</a></li>
<li><a class="reference internal" href="#common-problems-with-cgi-scripts">CGI スクリプトでの一般的な問題</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mod-python">mod_python</a></li>
<li><a class="reference internal" href="#fastcgi-and-scgi">FastCGI と SCGI</a><ul>
<li><a class="reference internal" href="#setting-up-fastcgi">FastCGI のセットアップ</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mod-wsgi">mod_wsgi</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-back-wsgi">後ろに下って: WSGI</a><ul>
<li><a class="reference internal" href="#wsgi-servers">WSGI サーバ</a></li>
<li><a class="reference internal" href="#case-study-moinmoin">事例研究: MoinMoin</a></li>
</ul>
</li>
<li><a class="reference internal" href="#model-view-controller">モデル・ビュー・コントローラ (Model-View-Controller)</a></li>
<li><a class="reference internal" href="#ingredients-for-websites">web サイトの要素</a><ul>
<li><a class="reference internal" href="#templates">テンプレート</a></li>
<li><a class="reference internal" href="#data-persistence">データの永続化</a></li>
</ul>
</li>
<li><a class="reference internal" href="#frameworks">フレームワーク</a><ul>
<li><a class="reference internal" href="#some-notable-frameworks">いくつかの注目に値するフレームワーク</a><ul>
<li><a class="reference internal" href="#django">Django</a></li>
<li><a class="reference internal" href="#turbogears">TurboGears</a></li>
<li><a class="reference internal" href="#zope">Zope</a></li>
<li><a class="reference internal" href="#other-notable-frameworks">他の注目に値するフレームワーク</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="urllib2.html"
                        title="前の章へ">urllib2 を使ってインターネット上のリソースを取得するには</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="argparse.html"
                        title="次の章へ">Argparse チュートリアル</a></p>
<h3>このページ</h3>
<ul class="this-page-menu">
  <li><a href="../bugs.html">バグ報告</a></li>
  <li><a href="https://github.com/python/cpython/blob/2.7/Doc/howto/webservers.rst"
         rel="nofollow">ソースの表示</a>
  </li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="検索" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="argparse.html" title="Argparse チュートリアル"
             >次へ</a> |</li>
        <li class="right" >
          <a href="urllib2.html" title="urllib2 を使ってインターネット上のリソースを取得するには"
             >前へ</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="http://www.python.jp/">Python</a> &#187;</li>
        <li>
          <span class="version_switcher_placeholder">2.7.13</span>
          <a href="../index.html">ドキュメント</a> &#187;
        </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python HOWTO</a> &#187;</li> 
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 1990-2017, Python Software Foundation (translated by Python ドキュメント日本語翻訳プロジェクト).
    <br />
    Python Software Foundation は非営利団体です。
    <a href="https://www.python.org/psf/donations/">寄付</a>
    <br />
    最終更新日時: 2017-04-08
    <a href="../bugs.html">バグを見つけたら</a>?
    <br />
    このドキュメントは <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.9 を使って作成されました。
    </div>

  </body>
</html>