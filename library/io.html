<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>15.2. io — ストリームを扱うコアツール &#8212; Python 2.7.13 ドキュメント</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.7.13',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Python 2.7.13 ドキュメント 内を検索"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Python 2.7.13 ドキュメント" href="../contents.html" />
    <link rel="up" title="15. 汎用オペレーティングシステムサービス" href="allos.html" />
    <link rel="next" title="15.3. time — 時刻データへのアクセスと変換" href="time.html" />
    <link rel="prev" title="15.1. os — 雑多なオペレーティングシステムインタフェース" href="os.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    <link rel="canonical" href="https://docs.python.jp/3/library/io.html" />
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script type="text/javascript" src="../_static/_jp.js"></script>
    
    <script type="text/javascript" src="../_static/version_switch.js"></script>
 
    

  </head>
  <body role="document">  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="time.html" title="15.3. time — 時刻データへのアクセスと変換"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="os.html" title="15.1. os — 雑多なオペレーティングシステムインタフェース"
             accesskey="P">前へ</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="http://www.python.jp/">Python</a> &#187;</li>
        <li>
          <span class="version_switcher_placeholder">2.7.13</span>
          <a href="../index.html">ドキュメント</a> &#187;
        </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python 標準ライブラリ</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="allos.html" accesskey="U">15. 汎用オペレーティングシステムサービス</a> &#187;</li> 
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-io">
<span id="io-core-tools-for-working-with-streams"></span><h1>15.2. <a class="reference internal" href="#module-io" title="io: Core tools for working with streams."><code class="xref py py-mod docutils literal"><span class="pre">io</span></code></a> &#8212; ストリームを扱うコアツール<a class="headerlink" href="#module-io" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="versionadded">
<p><span class="versionmodified">バージョン 2.6 で追加.</span></p>
</div>
<p><a class="reference internal" href="#module-io" title="io: Core tools for working with streams."><code class="xref py py-mod docutils literal"><span class="pre">io</span></code></a> モジュールはストリーム処理を行う Python インタフェースを提供します。 Python 2.x では、これは組み込みの <a class="reference internal" href="functions.html#file" title="file"><code class="xref py py-class docutils literal"><span class="pre">file</span></code></a> オブジェクトの代わりとして提案されていますが、Python 3.x では、これがファイルやストリームのデフォルトインタフェースです。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">このモジュールはもともと、Python 3.x のために設計されたものなので、このドキュメントの中で使われるすべての &#8220;bytes&#8221; は (<code class="xref py py-class docutils literal"><span class="pre">bytes</span></code> がエイリアスとなる) <a class="reference internal" href="functions.html#str" title="str"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> 型のことで、すべての &#8220;text&#8221; は <a class="reference internal" href="functions.html#unicode" title="unicode"><code class="xref py py-class docutils literal"><span class="pre">unicode</span></code></a> 型のことです。さらに、 <a class="reference internal" href="#module-io" title="io: Core tools for working with streams."><code class="xref py py-mod docutils literal"><span class="pre">io</span></code></a> API では、この 2 つの型は入れ替えられません。</p>
</div>
<p>I/O 階層の最上位には抽象基底クラスの <a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> があります。 <a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> ではストリームに対して基本的なインタフェースを定義しています。しかしながら、ストリームに対する読み込みと書き込みが分離されていないことに注意してください。実装においては与えられた操作をサポートしない場合は <a class="reference internal" href="exceptions.html#exceptions.IOError" title="exceptions.IOError"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code></a> を送出することが許されています。</p>
<p><a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> の拡張は、単純なストリームに対する生のバイト列の読み書きを扱う <a class="reference internal" href="#io.RawIOBase" title="io.RawIOBase"><code class="xref py py-class docutils literal"><span class="pre">RawIOBase</span></code></a> です。 <a class="reference internal" href="#io.FileIO" title="io.FileIO"><code class="xref py py-class docutils literal"><span class="pre">FileIO</span></code></a> は、 <a class="reference internal" href="#io.RawIOBase" title="io.RawIOBase"><code class="xref py py-class docutils literal"><span class="pre">RawIOBase</span></code></a> を継承してマシンのファイルシステム中のファイルへのインタフェースを提供します。</p>
<p><a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> では生のバイトストリーム (<a class="reference internal" href="#io.RawIOBase" title="io.RawIOBase"><code class="xref py py-class docutils literal"><span class="pre">RawIOBase</span></code></a>) 上にバッファ処理を追加します。そのサブクラスの <a class="reference internal" href="#io.BufferedWriter" title="io.BufferedWriter"><code class="xref py py-class docutils literal"><span class="pre">BufferedWriter</span></code></a>, <a class="reference internal" href="#io.BufferedReader" title="io.BufferedReader"><code class="xref py py-class docutils literal"><span class="pre">BufferedReader</span></code></a>, <a class="reference internal" href="#io.BufferedRWPair" title="io.BufferedRWPair"><code class="xref py py-class docutils literal"><span class="pre">BufferedRWPair</span></code></a> では、それぞれ読み込み専用、書き込み専用、読み書き可能なストリームをバッファします。 <a class="reference internal" href="#io.BufferedRandom" title="io.BufferedRandom"><code class="xref py py-class docutils literal"><span class="pre">BufferedRandom</span></code></a> ではランダムアクセスストリームに対してバッファされたインタフェースを提供します。 <a class="reference internal" href="#io.BytesIO" title="io.BytesIO"><code class="xref py py-class docutils literal"><span class="pre">BytesIO</span></code></a> はインメモリバイトへのシンプルなストリームです。</p>
<p>Another <a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> subclass, <a class="reference internal" href="#io.TextIOBase" title="io.TextIOBase"><code class="xref py py-class docutils literal"><span class="pre">TextIOBase</span></code></a>, deals with
streams whose bytes represent text, and handles encoding and decoding
from and to <a class="reference internal" href="functions.html#unicode" title="unicode"><code class="xref py py-class docutils literal"><span class="pre">unicode</span></code></a> strings.  <a class="reference internal" href="#io.TextIOWrapper" title="io.TextIOWrapper"><code class="xref py py-class docutils literal"><span class="pre">TextIOWrapper</span></code></a>, which extends
it, is a buffered text interface to a buffered raw stream
(<a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a>). Finally, <a class="reference internal" href="#io.StringIO" title="io.StringIO"><code class="xref py py-class docutils literal"><span class="pre">StringIO</span></code></a> is an in-memory
stream for unicode text.</p>
<p>引数名は規約に含まれていません。そして <a class="reference internal" href="#io.open" title="io.open"><code class="xref py py-func docutils literal"><span class="pre">open()</span></code></a> の引数だけがキーワード引数として用いられることが意図されています。</p>
<div class="section" id="module-interface">
<h2>15.2.1. モジュールインタフェース<a class="headerlink" href="#module-interface" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="data">
<dt id="io.DEFAULT_BUFFER_SIZE">
<code class="descclassname">io.</code><code class="descname">DEFAULT_BUFFER_SIZE</code><a class="headerlink" href="#io.DEFAULT_BUFFER_SIZE" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>モジュールのバッファ I/O クラスで使用されるデフォルトのバッファサイズを指定する整数値です。 <a class="reference internal" href="#io.open" title="io.open"><code class="xref py py-func docutils literal"><span class="pre">open()</span></code></a> は可能であればファイル全体のサイズ (<a class="reference internal" href="os.html#os.stat" title="os.stat"><code class="xref py py-func docutils literal"><span class="pre">os.stat()</span></code></a> で取得されます) を使用します。</p>
</dd></dl>

<dl class="function">
<dt id="io.open">
<code class="descclassname">io.</code><code class="descname">open</code><span class="sig-paren">(</span><em>file</em>, <em>mode='r'</em>, <em>buffering=-1</em>, <em>encoding=None</em>, <em>errors=None</em>, <em>newline=None</em>, <em>closefd=True</em><span class="sig-paren">)</span><a class="headerlink" href="#io.open" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>file</em> を開き、対応するストリームを返します。ファイルが開けなかった場合、 <a class="reference internal" href="exceptions.html#exceptions.IOError" title="exceptions.IOError"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code></a> が発生します。</p>
<p><em>file</em> は開きたいファイルの (絶対、またはカレントワーキングディレクトリに対する相対) パス名を示す文字列か、開きたいファイルがラップされているファイル記述子です。 (ファイル記述子が与えられた場合、 <em>closefd</em> が <code class="docutils literal"><span class="pre">False</span></code> に設定されていない限り、返された I/O オブジェクトが閉じられたときにそのファイル識別子も閉じられます)</p>
<p><em>mode</em> はオプションの文字列です。これによってファイルをどのようなモードで開くか明示することができます。デフォルトは <code class="docutils literal"><span class="pre">'r'</span></code> でテキストモードで読み取り専用で開くことを指します。他にも <code class="docutils literal"><span class="pre">'w'</span></code> は書き込み専用 (もしファイルが存在していた場合は上書きになります) となり、 <code class="docutils literal"><span class="pre">'a'</span></code> では追記モードとなります。 (<code class="docutils literal"><span class="pre">'a'</span></code> は <em>いくつかの</em> Unixシステムでは <em>すべての</em> 書き込みがシーク位置に関係なくファイルの末尾に追記されることを意味します) テキストモードでは、もし <em>encoding</em> が指定されていなかった場合、エンコーディングはプラットフォーム依存となります。 (生のバイトデータの読み込みと書き込みはバイナリモードを用いて、 <em>encoding</em> は未指定のままとします) 指定可能なモードは次の表の通りです。</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><p class="first last">文字</p>
</td>
<td><p class="first last">意味</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">'r'</span></code></td>
<td><p class="first last">読み込み用に開く (デフォルト)</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">'w'</span></code></td>
<td><p class="first last">書き込み用に開き、ファイルはまず切り詰められる</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">'a'</span></code></td>
<td><p class="first last">書き込み用に開き、ファイルが存在する場合は末尾に追記する</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">'b'</span></code></td>
<td><p class="first last">バイナリモード</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">'t'</span></code></td>
<td><p class="first last">テキストモード (デフォルト)</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">'+'</span></code></td>
<td><p class="first last">ディスクファイルを更新用に開く (読み込み／書き込み)</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">'U'</span></code></td>
<td><p class="first last">ユニバーサル改行モード (後方互換性のためのものです; 新しいコードでは使うべきでありません)</p>
</td>
</tr>
</tbody>
</table>
<p>デフォルトモードは <code class="docutils literal"><span class="pre">'rt'</span></code> です (テキストを読み込み専用で開きます)。バイナリのランダムアクセスでは <code class="docutils literal"><span class="pre">'w+b'</span></code> はファイルを開き、ファイルを 0 バイトに切り詰めます。一方で <code class="docutils literal"><span class="pre">'r+b'</span></code> でファイルを開くとサイズの切り詰めは行われません。</p>
<p>Python ではバイナリモードで開かれたファイルとテキストモードで開かれたファイルは区別されます。オペレーティングシステムが区別しない場合でもこの区別は適用されます。バイナリモードで開かれたファイル (つまり <em>mode</em> 引数に <code class="docutils literal"><span class="pre">'b'</span></code> が含まれるとき) では、中身を <code class="xref py py-class docutils literal"><span class="pre">bytes</span></code> オブジェクトとして返し、一切のデコードを行いません。テキストモード (デフォルトか <em>mode</em> 引数に <code class="docutils literal"><span class="pre">'t'</span></code> が含まれている場合) では、ファイルの内容は <a class="reference internal" href="functions.html#unicode" title="unicode"><code class="xref py py-class docutils literal"><span class="pre">unicode</span></code></a> 文字列として返され、バイト列はプラットフォーム依存のエンコーディングか、 <em>encoding</em> が指定された場合は指定されたエンコーディングを使ってデコードされます。</p>
<p>オプションの <em>buffering</em> はバッファ用の設定を行う整数値です。 0 を設定することでバッファがオフになります (バイナリモードでのみ有効です)。 1 の場合は 1 行ごとのバッファリングを行い (テキストモードでのみ利用可能です)、 1 より大きい場合は固定サイズチャンクバッファのサイズを表します。 <em>buffering</em> 引数が与えられなければ、デフォルトのバッファリングポリシーは以下のように働きます:</p>
<ul class="simple">
<li><p class="first">バイナリファイルは固定サイズのチャンクでバッファリングされます。バッファサイズは、背後のデバイスの「ブロックサイズ」を決定するヒューリスティックを用いて選択され、それが不可能な場合は代わりに <a class="reference internal" href="#io.DEFAULT_BUFFER_SIZE" title="io.DEFAULT_BUFFER_SIZE"><code class="xref py py-attr docutils literal"><span class="pre">DEFAULT_BUFFER_SIZE</span></code></a> が使われます。多くのシステムでは、典型的なバッファサイズは 4096 か 8192 バイト長になるでしょう。</p>
</li>
<li><p class="first">「対話的な」テキストファイル (<code class="xref py py-meth docutils literal"><span class="pre">isatty()</span></code> が True を返すファイル) は行バッファリングを使用します。その他のテキストファイルは、上で説明されたバイナリファイルのためのポリシーを使用します。</p>
</li>
</ul>
<p><em>encoding</em> はファイルのエンコードやデコードに使われるエンコーディングの名前です。このオプションはテキストモードでのみ使用されるべきです。デフォルトエンコーディングはプラットフォーム依存 (<a class="reference internal" href="locale.html#locale.getpreferredencoding" title="locale.getpreferredencoding"><code class="xref py py-func docutils literal"><span class="pre">locale.getpreferredencoding()</span></code></a> が返すもの) ですが、Pythonでサポートされているエンコーディングはどれでも使えます。詳しくは <a class="reference internal" href="codecs.html#module-codecs" title="codecs: Encode and decode data and streams."><code class="xref py py-mod docutils literal"><span class="pre">codecs</span></code></a> モジュール内のサポートしているエンコーディングのリストを参照してください。</p>
<p><em>errors</em> is an optional string that specifies how encoding and decoding
errors are to be handled—this cannot be used in binary mode.  Pass
<code class="docutils literal"><span class="pre">'strict'</span></code> to raise a <a class="reference internal" href="exceptions.html#exceptions.ValueError" title="exceptions.ValueError"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code></a> exception if there is an encoding
error (the default of <code class="docutils literal"><span class="pre">None</span></code> has the same effect), or pass <code class="docutils literal"><span class="pre">'ignore'</span></code> to
ignore errors.  (Note that ignoring encoding errors can lead to data loss.)
<code class="docutils literal"><span class="pre">'replace'</span></code> causes a replacement marker (such as <code class="docutils literal"><span class="pre">'?'</span></code>) to be inserted
where there is malformed data.  When writing, <code class="docutils literal"><span class="pre">'xmlcharrefreplace'</span></code>
(replace with the appropriate XML character reference) or
<code class="docutils literal"><span class="pre">'backslashreplace'</span></code> (replace with backslashed escape sequences) can be
used.  Any other error handling name that has been registered with
<a class="reference internal" href="codecs.html#codecs.register_error" title="codecs.register_error"><code class="xref py py-func docutils literal"><span class="pre">codecs.register_error()</span></code></a> is also valid.</p>
<p id="index-0"><em>newline</em> は <a class="reference internal" href="../glossary.html#term-universal-newlines"><span class="xref std std-term">universal newlines</span></a> モードがどのように働くかを制御します (テキストモードでのみはたらきます)。これは <code class="docutils literal"><span class="pre">None</span></code>, <code class="docutils literal"><span class="pre">''</span></code>, <code class="docutils literal"><span class="pre">'\n'</span></code>, <code class="docutils literal"><span class="pre">'\r'</span></code>, <code class="docutils literal"><span class="pre">'\r\n'</span></code> のいずれかです。これは以下のようにはたらきます:</p>
<ul class="simple">
<li><p class="first">ストリームからの入力の読み込み時、<em>newline</em> が <code class="docutils literal"><span class="pre">None</span></code> であれば、ユニバーサル改行モードが有効になります。入力中の行は <code class="docutils literal"><span class="pre">'\n'</span></code>, <code class="docutils literal"><span class="pre">'\r'</span></code>, または <code class="docutils literal"><span class="pre">'\r\n'</span></code> で終端され、呼び出し元に返される前に <code class="docutils literal"><span class="pre">'\n'</span></code> に切り詰められます。<code class="docutils literal"><span class="pre">''</span></code> なら、ユニバーサル改行モードは有効になりますが、行末は翻訳されずに呼び出し元に返されます。その他の正当な値なら、入力行は与えられた文字列でのみ終端され、行末は翻訳されずに呼び出し元に返されます。</p>
</li>
<li><p class="first">出力時、 <em>newline</em> が <code class="docutils literal"><span class="pre">None</span></code> の場合は、すべての <code class="docutils literal"><span class="pre">'\n'</span></code> 文字はシステムのデフォルト行区切り文字 <a class="reference internal" href="os.html#os.linesep" title="os.linesep"><code class="xref py py-data docutils literal"><span class="pre">os.linesep</span></code></a> に変換されます。もし <em>newline</em> が <code class="docutils literal"><span class="pre">''</span></code> の場合、変換は起こりません。もし <em>newline</em> に他の適切な値が指定された場合は、 <code class="docutils literal"><span class="pre">'\n'</span></code> 文字は与えられた文字に変換されます。</p>
</li>
</ul>
<p>もし <em>closefd</em> が <code class="docutils literal"><span class="pre">False</span></code> で、ファイル名ではなくてファイル記述子が与えられていた場合、処理中のファイル記述子はファイルが閉じられた後も開いたままとなります。もしファイル名が与えられていた場合は、 <em>closefd</em> は関係ありません。しかし <code class="docutils literal"><span class="pre">True</span></code> でなければなりません (デフォルト値)。</p>
<p><a class="reference internal" href="#io.open" title="io.open"><code class="xref py py-func docutils literal"><span class="pre">open()</span></code></a> によって返されるファイルオブジェクトの型はモードに依存します。 <a class="reference internal" href="#io.open" title="io.open"><code class="xref py py-func docutils literal"><span class="pre">open()</span></code></a> がテキストモードでファイルを開くために使われた場合 (<code class="docutils literal"><span class="pre">'w'</span></code>、 <code class="docutils literal"><span class="pre">'r'</span></code>、 <code class="docutils literal"><span class="pre">'wt'</span></code>、 <code class="docutils literal"><span class="pre">'rt'</span></code> など) <a class="reference internal" href="#io.TextIOBase" title="io.TextIOBase"><code class="xref py py-class docutils literal"><span class="pre">TextIOBase</span></code></a> のサブクラス (具体的には <a class="reference internal" href="#io.TextIOWrapper" title="io.TextIOWrapper"><code class="xref py py-class docutils literal"><span class="pre">TextIOWrapper</span></code></a>) が返されます。バッファリングをしてバイナリモードでファイルを開く場合、 <a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> のサブクラスが返されます。具体的なクラスは多様です。もし読み取り専用のバイナリモードだった場合は <a class="reference internal" href="#io.BufferedReader" title="io.BufferedReader"><code class="xref py py-class docutils literal"><span class="pre">BufferedReader</span></code></a> が返されます。書き込み専用のバイナリモードだった場合は <a class="reference internal" href="#io.BufferedWriter" title="io.BufferedWriter"><code class="xref py py-class docutils literal"><span class="pre">BufferedWriter</span></code></a> が返されます。読み書き可能なバイナリモードの場合は <a class="reference internal" href="#io.BufferedRandom" title="io.BufferedRandom"><code class="xref py py-class docutils literal"><span class="pre">BufferedRandom</span></code></a> が返されます。バッファリングが無効な場合、raw ストリーム、 <a class="reference internal" href="#io.RawIOBase" title="io.RawIOBase"><code class="xref py py-class docutils literal"><span class="pre">RawIOBase</span></code></a> のサブクラス、 <a class="reference internal" href="#io.FileIO" title="io.FileIO"><code class="xref py py-class docutils literal"><span class="pre">FileIO</span></code></a> が返されます。</p>
<p>It is also possible to use an <a class="reference internal" href="functions.html#unicode" title="unicode"><code class="xref py py-class docutils literal"><span class="pre">unicode</span></code></a> or <code class="xref py py-class docutils literal"><span class="pre">bytes</span></code> string
as a file for both reading and writing.  For <a class="reference internal" href="functions.html#unicode" title="unicode"><code class="xref py py-class docutils literal"><span class="pre">unicode</span></code></a> strings
<a class="reference internal" href="#io.StringIO" title="io.StringIO"><code class="xref py py-class docutils literal"><span class="pre">StringIO</span></code></a> can be used like a file opened in text mode,
and for <code class="xref py py-class docutils literal"><span class="pre">bytes</span></code> a <a class="reference internal" href="#io.BytesIO" title="io.BytesIO"><code class="xref py py-class docutils literal"><span class="pre">BytesIO</span></code></a> can be used like a
file opened in a binary mode.</p>
</dd></dl>

<dl class="exception">
<dt id="io.BlockingIOError">
<em class="property">exception </em><code class="descclassname">io.</code><code class="descname">BlockingIOError</code><a class="headerlink" href="#io.BlockingIOError" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>非ブロッキングストリームでブロック処理が起きた場合に発生するエラーです。 <a class="reference internal" href="exceptions.html#exceptions.IOError" title="exceptions.IOError"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code></a> を継承しています。</p>
<p><a class="reference internal" href="exceptions.html#exceptions.IOError" title="exceptions.IOError"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code></a> で持っている属性以外に <a class="reference internal" href="#io.BlockingIOError" title="io.BlockingIOError"><code class="xref py py-exc docutils literal"><span class="pre">BlockingIOError</span></code></a> では次の属性を持っています。</p>
<dl class="attribute">
<dt id="io.BlockingIOError.characters_written">
<code class="descname">characters_written</code><a class="headerlink" href="#io.BlockingIOError.characters_written" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ブロック前にストリームに書き込まれる文字数を保持する整数値です。</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="io.UnsupportedOperation">
<em class="property">exception </em><code class="descclassname">io.</code><code class="descname">UnsupportedOperation</code><a class="headerlink" href="#io.UnsupportedOperation" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="exceptions.html#exceptions.IOError" title="exceptions.IOError"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code></a> と <a class="reference internal" href="exceptions.html#exceptions.ValueError" title="exceptions.ValueError"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code></a> を継承した例外で、ストリームに未サポートの操作が行われた場合に発生します。</p>
</dd></dl>

</div>
<div class="section" id="i-o-base-classes">
<h2>15.2.2. I/O 基底クラス<a class="headerlink" href="#i-o-base-classes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="class">
<dt id="io.IOBase">
<em class="property">class </em><code class="descclassname">io.</code><code class="descname">IOBase</code><a class="headerlink" href="#io.IOBase" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>すべての I/O クラスの抽象基底クラスです。バイトストリームへの操作を行います。パブリックなコンストラクタはありません。</p>
<p>継承先のクラスが選択的にオーバライドできるように、このクラスは多くのメソッドに空の抽象実装をしています。デフォルトの実装では、読み込み、書き込み、シークができないファイルを表現します。</p>
<p>Even though <a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> does not declare <code class="xref py py-meth docutils literal"><span class="pre">read()</span></code>, <code class="xref py py-meth docutils literal"><span class="pre">readinto()</span></code>,
or <code class="xref py py-meth docutils literal"><span class="pre">write()</span></code> because their signatures will vary, implementations and
clients should consider those methods part of the interface.  Also,
implementations may raise an <a class="reference internal" href="exceptions.html#exceptions.IOError" title="exceptions.IOError"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code></a> when operations they do not
support are called.</p>
<p>The basic type used for binary data read from or written to a file is
<code class="xref py py-class docutils literal"><span class="pre">bytes</span></code> (also known as <a class="reference internal" href="functions.html#str" title="str"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a>).  Method arguments may
also be <a class="reference internal" href="functions.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal"><span class="pre">bytearray</span></code></a> or <a class="reference internal" href="stdtypes.html#memoryview" title="memoryview"><code class="xref py py-class docutils literal"><span class="pre">memoryview</span></code></a> of arrays of bytes.
In some cases, such as <a class="reference internal" href="#io.RawIOBase.readinto" title="io.RawIOBase.readinto"><code class="xref py py-meth docutils literal"><span class="pre">readinto()</span></code></a>, a writable object
such as <a class="reference internal" href="functions.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal"><span class="pre">bytearray</span></code></a> is required.
Text I/O classes work with <a class="reference internal" href="functions.html#unicode" title="unicode"><code class="xref py py-class docutils literal"><span class="pre">unicode</span></code></a> data.</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 2.7 で変更: </span>Implementations should support <a class="reference internal" href="stdtypes.html#memoryview" title="memoryview"><code class="xref py py-class docutils literal"><span class="pre">memoryview</span></code></a> arguments.</p>
</div>
<p>閉じられたストリームに対するメソッド呼び出しは (問い合わせであっても) 未定義です。この場合、実装は <a class="reference internal" href="exceptions.html#exceptions.IOError" title="exceptions.IOError"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code></a> を発生させることがあります。</p>
<p><a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> (とそのサブクラス) はイテレータプロトコルをサポートします。 <a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> オブジェクトをイテレートすると、ストリーム内の行が yield されます。行は、ストリームが (<code class="xref py py-class docutils literal"><span class="pre">bytes</span></code> を与える) バイナリストリームか (<a class="reference internal" href="functions.html#unicode" title="unicode"><code class="xref py py-class docutils literal"><span class="pre">unicode</span></code></a> 文字列を与える) テキストストリームかによって、 少し違う定義がされています。下の <a class="reference internal" href="#io.IOBase.readline" title="io.IOBase.readline"><code class="xref py py-meth docutils literal"><span class="pre">readline()</span></code></a> を参照してください。</p>
<p>IOBase はコンテキストマネージャでもあります。そのため <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal"><span class="pre">with</span></code></a> 構文をサポートします。次の例では、 <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal"><span class="pre">with</span></code></a> 構文が終わった後で&#8212;たとえ例外が発生した場合でも、 <em>file</em> は閉じられます。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;spam.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;Spam and eggs!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> は以下のデータ属性とメソッドを提供します:</p>
<dl class="method">
<dt id="io.IOBase.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.IOBase.close" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このストリームをフラッシュして閉じます。このメソッドはファイルが既に閉じられていた場合は特に何の効果もありません。いったんファイルが閉じられると、すべてのファイルに対する操作 (例えば読み込みや書き込み) で <a class="reference internal" href="exceptions.html#exceptions.ValueError" title="exceptions.ValueError"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code></a> が発生します。</p>
<p>利便性のためにこのメソッドを複数回呼ぶことは許されています。しかし、効果があるのは最初の1回だけです。</p>
</dd></dl>

<dl class="attribute">
<dt id="io.IOBase.closed">
<code class="descname">closed</code><a class="headerlink" href="#io.IOBase.closed" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ストリームが閉じられていた場合 True になります。</p>
</dd></dl>

<dl class="method">
<dt id="io.IOBase.fileno">
<code class="descname">fileno</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.IOBase.fileno" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ストリームが保持しているファイル記述子 (整数値) が存在する場合はそれを返します。もし IO オブジェクトがファイル記述子を使っていない場合は <a class="reference internal" href="exceptions.html#exceptions.IOError" title="exceptions.IOError"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code></a> が発生します。</p>
</dd></dl>

<dl class="method">
<dt id="io.IOBase.flush">
<code class="descname">flush</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.IOBase.flush" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>適用可能であればストリームの書き込みバッファをフラッシュします。読み込み専用や非ブロッキングストリームでは何もしません。</p>
</dd></dl>

<dl class="method">
<dt id="io.IOBase.isatty">
<code class="descname">isatty</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.IOBase.isatty" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ストリームが対話的であれば (つまりターミナルや tty デバイスにつながっている場合) <code class="docutils literal"><span class="pre">True</span></code> を返します。</p>
</dd></dl>

<dl class="method">
<dt id="io.IOBase.readable">
<code class="descname">readable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.IOBase.readable" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ストリームが読み込める場合 <code class="docutils literal"><span class="pre">True</span></code> を返します。 <code class="docutils literal"><span class="pre">False</span></code> の場合は <code class="xref py py-meth docutils literal"><span class="pre">read()</span></code> は <a class="reference internal" href="exceptions.html#exceptions.IOError" title="exceptions.IOError"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code></a> を発生させます。</p>
</dd></dl>

<dl class="method">
<dt id="io.IOBase.readline">
<code class="descname">readline</code><span class="sig-paren">(</span><em>limit=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#io.IOBase.readline" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ストリームから 1 行読み込んで返します。もし <em>limit</em> が指定された場合、最大で <em>limit</em> バイトが読み込まれます。</p>
<p>バイナリファイルでは行末文字は常に <code class="docutils literal"><span class="pre">b'\n'</span></code> となります。テキストファイルでは、認識される行末文字を選択するために <a class="reference internal" href="#io.open" title="io.open"><code class="xref py py-func docutils literal"><span class="pre">open()</span></code></a> に対する <em>newline</em> 引数が使われます。</p>
</dd></dl>

<dl class="method">
<dt id="io.IOBase.readlines">
<code class="descname">readlines</code><span class="sig-paren">(</span><em>hint=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#io.IOBase.readlines" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ストリームから行のリストを読み込んで返します。 <em>hint</em> を指定することで、読み込む行数を制御できます。もし読み込んだすべての行のサイズ (バイト数、もしくは文字数) が <em>hint</em> の値を超えた場合、読み込みをそこで終了します。</p>
<p><code class="docutils literal"><span class="pre">file.readlines()</span></code> を呼びださなくても <code class="docutils literal"><span class="pre">for</span> <span class="pre">line</span> <span class="pre">in</span> <span class="pre">file:</span> <span class="pre">...</span></code> のように、file オブジェクトを直接イテレートすることができることに注意してください。</p>
</dd></dl>

<dl class="method">
<dt id="io.IOBase.seek">
<code class="descname">seek</code><span class="sig-paren">(</span><em>offset</em><span class="optional">[</span>, <em>whence</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#io.IOBase.seek" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ストリーム位置を指定された <em>offset</em> バイトに変更します。<em>offset</em> は <em>whence</em> で指定された位置からの相対位置として解釈されます。 <em>whence</em> のデフォルト値は <code class="xref py py-data docutils literal"><span class="pre">SEEK_SET</span></code> です。 <em>whence</em> に指定できる値は:</p>
<ul class="simple">
<li><p class="first"><code class="xref py py-data docutils literal"><span class="pre">SEEK_SET</span></code> または <code class="docutils literal"><span class="pre">0</span></code> &#8211; ストリームの先頭 (デフォルト)。 <em>offset</em> は 0 もしくは正の値でなければなりません。</p>
</li>
<li><p class="first"><code class="xref py py-data docutils literal"><span class="pre">SEEK_CUR</span></code> または <code class="docutils literal"><span class="pre">1</span></code> &#8211; 現在のストリーム位置。 <em>offset</em> は負の値も可能です。</p>
</li>
<li><p class="first"><code class="xref py py-data docutils literal"><span class="pre">SEEK_END</span></code> または <code class="docutils literal"><span class="pre">2</span></code> &#8211; ストリームの末尾。 <em>offset</em> は通常負の値です。</p>
</li>
</ul>
<p>新しい絶対位置を返します。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 2.7 で追加: </span><code class="docutils literal"><span class="pre">SEEK_*</span></code> 定数</p>
</div>
</dd></dl>

<dl class="method">
<dt id="io.IOBase.seekable">
<code class="descname">seekable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.IOBase.seekable" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>もしストリームがランダムアクセスをサポートしていた場合 <code class="docutils literal"><span class="pre">True</span></code> を返します。 <code class="docutils literal"><span class="pre">False</span></code> の場合は <a class="reference internal" href="#io.IOBase.seek" title="io.IOBase.seek"><code class="xref py py-meth docutils literal"><span class="pre">seek()</span></code></a>、 <a class="reference internal" href="#io.IOBase.tell" title="io.IOBase.tell"><code class="xref py py-meth docutils literal"><span class="pre">tell()</span></code></a>、 <a class="reference internal" href="#io.IOBase.truncate" title="io.IOBase.truncate"><code class="xref py py-meth docutils literal"><span class="pre">truncate()</span></code></a> は <a class="reference internal" href="exceptions.html#exceptions.IOError" title="exceptions.IOError"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code></a> を発生させます。</p>
</dd></dl>

<dl class="method">
<dt id="io.IOBase.tell">
<code class="descname">tell</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.IOBase.tell" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>現在のストリーム位置を返します。</p>
</dd></dl>

<dl class="method">
<dt id="io.IOBase.truncate">
<code class="descname">truncate</code><span class="sig-paren">(</span><em>size=None</em><span class="sig-paren">)</span><a class="headerlink" href="#io.IOBase.truncate" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定された <em>size</em> バイト (または <em>size</em> が指定されなければ現在の位置) にストリームをリサイズします。現在のストリーム位置は変更されません。このリサイズは、現在のファイルサイズを拡大または縮小させることができます。拡大の場合には、新しいファイル領域の内容はプラットホームに依存します (ほとんどのシステムでは、追加のバイトが 0 で埋められます。 Windowsでは不定です)。新しいファイルサイズが返されます。</p>
</dd></dl>

<dl class="method">
<dt id="io.IOBase.writable">
<code class="descname">writable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.IOBase.writable" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ストリームが書き込みをサポートしている場合 <code class="docutils literal"><span class="pre">True</span></code> を返します。 <code class="docutils literal"><span class="pre">False</span></code> の場合は <code class="xref py py-meth docutils literal"><span class="pre">write()</span></code>、 <a class="reference internal" href="#io.IOBase.truncate" title="io.IOBase.truncate"><code class="xref py py-meth docutils literal"><span class="pre">truncate()</span></code></a> は <a class="reference internal" href="exceptions.html#exceptions.IOError" title="exceptions.IOError"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code></a> を返します。</p>
</dd></dl>

<dl class="method">
<dt id="io.IOBase.writelines">
<code class="descname">writelines</code><span class="sig-paren">(</span><em>lines</em><span class="sig-paren">)</span><a class="headerlink" href="#io.IOBase.writelines" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ストリームに複数行書き込みます。行区切り文字は付与されないので、通常書き込む各行の行末には行区切り文字があります。</p>
</dd></dl>

<dl class="method">
<dt id="io.IOBase.__del__">
<code class="descname">__del__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.IOBase.__del__" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>オブジェクトの破壊の用意をします。このメソッドはインスタンスの <a class="reference internal" href="#io.IOBase.close" title="io.IOBase.close"><code class="xref py py-meth docutils literal"><span class="pre">close()</span></code></a> メソッドを呼びます。 <a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> はこのメソッドのデフォルトの実装を提供します</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="io.RawIOBase">
<em class="property">class </em><code class="descclassname">io.</code><code class="descname">RawIOBase</code><a class="headerlink" href="#io.RawIOBase" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>生のバイナリ I/O への基底クラスです。 <a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> を継承しています。パブリックコンストラクタはありません。</p>
<p>生のバイナリ I/O は典型的に、下にある OS デバイスや API への、低レベルなアクセスを提供し、高レベルな基本要素へとカプセル化しようとはしません (これはこのページで後述する Buffered I/O や Text I/O に任せます)。</p>
<p><a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> の属性やメソッドに加えて、 RawIOBase は次のメソッドを提供します：</p>
<dl class="method">
<dt id="io.RawIOBase.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>n=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#io.RawIOBase.read" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>オブジェクトを <em>n</em> バイトまで読み込み、それを返します。簡単のため、 <em>n</em> が指定されていないか -1 なら、 <a class="reference internal" href="#io.RawIOBase.readall" title="io.RawIOBase.readall"><code class="xref py py-meth docutils literal"><span class="pre">readall()</span></code></a> が呼び出されます。そうでなければ、システムコール呼び出しが一度だけ行われます。既に EOF に達していたら空のバイトオブジェクトが返されます。オペレーティングシステムコールが返したものがが <em>n</em> バイトより少なければ、 <em>n</em> バイトより少なく返されることがあります。</p>
<p>0 バイトが返って、 <em>n</em> が 0 でなければ、それはファイルの終端を表します。オブジェクトがノンブロッキングモードで、 1 バイトも読み込めなければ、 <code class="docutils literal"><span class="pre">None</span></code> が返されます。</p>
</dd></dl>

<dl class="method">
<dt id="io.RawIOBase.readall">
<code class="descname">readall</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.RawIOBase.readall" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>EOF までストリームからすべてのバイトを読み込みます。必要な場合はストリームに対して複数の呼び出しをします。</p>
</dd></dl>

<dl class="method">
<dt id="io.RawIOBase.readinto">
<code class="descname">readinto</code><span class="sig-paren">(</span><em>b</em><span class="sig-paren">)</span><a class="headerlink" href="#io.RawIOBase.readinto" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Read up to len(b) bytes into <em>b</em>, and return the number
of bytes read.  The object <em>b</em> should be a pre-allocated, writable
array of bytes, either <a class="reference internal" href="functions.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal"><span class="pre">bytearray</span></code></a> or <a class="reference internal" href="stdtypes.html#memoryview" title="memoryview"><code class="xref py py-class docutils literal"><span class="pre">memoryview</span></code></a>.
If the object is in non-blocking mode and no
bytes are available, <code class="docutils literal"><span class="pre">None</span></code> is returned.</p>
</dd></dl>

<dl class="method">
<dt id="io.RawIOBase.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>b</em><span class="sig-paren">)</span><a class="headerlink" href="#io.RawIOBase.write" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Write <em>b</em> to the underlying raw stream, and return the
number of bytes written.  The object <em>b</em> should be an array
of bytes, either <code class="xref py py-class docutils literal"><span class="pre">bytes</span></code>, <a class="reference internal" href="functions.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal"><span class="pre">bytearray</span></code></a>, or
<a class="reference internal" href="stdtypes.html#memoryview" title="memoryview"><code class="xref py py-class docutils literal"><span class="pre">memoryview</span></code></a>.  The return value can be less than
<code class="docutils literal"><span class="pre">len(b)</span></code>, depending on specifics of the underlying raw stream, and
especially if it is in non-blocking mode.  <code class="docutils literal"><span class="pre">None</span></code> is returned if the
raw stream is set not to block and no single byte could be readily
written to it.  The caller may release or mutate <em>b</em> after
this method returns, so the implementation should only access <em>b</em>
during the method call.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="io.BufferedIOBase">
<em class="property">class </em><code class="descclassname">io.</code><code class="descname">BufferedIOBase</code><a class="headerlink" href="#io.BufferedIOBase" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>何らかのバッファリングをサポートするバイナリストリームの基底クラスです。 <a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> を継承します。パブリックなコンストラクタはありません。</p>
<p><a class="reference internal" href="#io.RawIOBase" title="io.RawIOBase"><code class="xref py py-class docutils literal"><span class="pre">RawIOBase</span></code></a> との主な違いは、メソッド <a class="reference internal" href="#io.BufferedIOBase.read" title="io.BufferedIOBase.read"><code class="xref py py-meth docutils literal"><span class="pre">read()</span></code></a>、 <a class="reference internal" href="#io.BufferedIOBase.readinto" title="io.BufferedIOBase.readinto"><code class="xref py py-meth docutils literal"><span class="pre">readinto()</span></code></a> および <a class="reference internal" href="#io.BufferedIOBase.write" title="io.BufferedIOBase.write"><code class="xref py py-meth docutils literal"><span class="pre">write()</span></code></a> は 、ことによると複数回のシステムコールを行って、(それぞれ) 要求されただけの入力を読み込もうとしたり与えられた出力の全てを消費しようとしたりする点です。</p>
<p>加えて、元になる生ストリームが非ブロッキングモードでかつ準備ができていない場合に、これらのメソッドは、 <a class="reference internal" href="#io.BlockingIOError" title="io.BlockingIOError"><code class="xref py py-exc docutils literal"><span class="pre">BlockingIOError</span></code></a> を送出するかもしれません。対応する <a class="reference internal" href="#io.RawIOBase" title="io.RawIOBase"><code class="xref py py-class docutils literal"><span class="pre">RawIOBase</span></code></a> バージョンと違って、 <code class="docutils literal"><span class="pre">None</span></code> を返すことはありません。</p>
<p>さらに、 <a class="reference internal" href="#io.BufferedIOBase.read" title="io.BufferedIOBase.read"><code class="xref py py-meth docutils literal"><span class="pre">read()</span></code></a> メソッドは、 <a class="reference internal" href="#io.BufferedIOBase.readinto" title="io.BufferedIOBase.readinto"><code class="xref py py-meth docutils literal"><span class="pre">readinto()</span></code></a> に従うデフォルト実装を持ちません。</p>
<p>通常の <a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> 実装は <a class="reference internal" href="#io.RawIOBase" title="io.RawIOBase"><code class="xref py py-class docutils literal"><span class="pre">RawIOBase</span></code></a> 実装を継承せずに、 <a class="reference internal" href="#io.BufferedWriter" title="io.BufferedWriter"><code class="xref py py-class docutils literal"><span class="pre">BufferedWriter</span></code></a> と <a class="reference internal" href="#io.BufferedReader" title="io.BufferedReader"><code class="xref py py-class docutils literal"><span class="pre">BufferedReader</span></code></a> がするようにこれをラップすべきです。</p>
<p><a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> は <a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> からのメソッドと属性に加えて、以下のメソッドを提供もしくはオーバーライドします:</p>
<dl class="attribute">
<dt id="io.BufferedIOBase.raw">
<code class="descname">raw</code><a class="headerlink" href="#io.BufferedIOBase.raw" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> が扱う根底の生ストリーム (<a class="reference internal" href="#io.RawIOBase" title="io.RawIOBase"><code class="xref py py-class docutils literal"><span class="pre">RawIOBase</span></code></a> インスタンス) を返します。これは <a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> API には含まれず、よって実装に含まれないことがあります。</p>
</dd></dl>

<dl class="method">
<dt id="io.BufferedIOBase.detach">
<code class="descname">detach</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.BufferedIOBase.detach" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>根底の生ストリームをバッファから分離して返します。</p>
<p>生ストリームが取り外された後、バッファは使用不能状態になります。</p>
<p>バッファには、 <a class="reference internal" href="#io.BytesIO" title="io.BytesIO"><code class="xref py py-class docutils literal"><span class="pre">BytesIO</span></code></a> など、このメソッドで返される単体のストリームという概念を持たないものがあります。これらは <a class="reference internal" href="#io.UnsupportedOperation" title="io.UnsupportedOperation"><code class="xref py py-exc docutils literal"><span class="pre">UnsupportedOperation</span></code></a> を送出します。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 2.7 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="io.BufferedIOBase.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>n=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#io.BufferedIOBase.read" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>最大で <em>n</em> バイト読み込み、返します。引数が省略されるか、 <code class="docutils literal"><span class="pre">None</span></code> か、または負の値であった場合、データは EOF に到達するまで読み込まれます。ストリームが既に EOF に到達していた場合は空の bytes オブジェクトが返されます。</p>
<p>引数が正で、元になる生ストリームが対話的でなければ、必要なバイト数を満たすように複数回の生 read が発行されるかもしれません (先に EOF に到達しない限りは)。対話的な場合は、最大で一回の raw read しか発行されず、短い結果でも EOF に達したことを意味しません。</p>
<p>元になる生ストリームがノンブロッキングモードで、呼び出された時点でデータを持っていなければ、 <a class="reference internal" href="#io.BlockingIOError" title="io.BlockingIOError"><code class="xref py py-exc docutils literal"><span class="pre">BlockingIOError</span></code></a> が送出されます。</p>
</dd></dl>

<dl class="method">
<dt id="io.BufferedIOBase.read1">
<code class="descname">read1</code><span class="sig-paren">(</span><em>n=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#io.BufferedIOBase.read1" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>根底の生ストリームの <a class="reference internal" href="#io.RawIOBase.read" title="io.RawIOBase.read"><code class="xref py py-meth docutils literal"><span class="pre">read()</span></code></a> メソッドを高々 1 回呼び出し、最大で <em>n</em> バイト読み込み、返します。これは、 <a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> オブジェクトの上に独自のバッファリングを実装するときに便利です。</p>
</dd></dl>

<dl class="method">
<dt id="io.BufferedIOBase.readinto">
<code class="descname">readinto</code><span class="sig-paren">(</span><em>b</em><span class="sig-paren">)</span><a class="headerlink" href="#io.BufferedIOBase.readinto" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Read up to len(b) bytes into <em>b</em>, and return the number of bytes read.
The object <em>b</em> should be a pre-allocated, writable array of bytes,
either <a class="reference internal" href="functions.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal"><span class="pre">bytearray</span></code></a> or <a class="reference internal" href="stdtypes.html#memoryview" title="memoryview"><code class="xref py py-class docutils literal"><span class="pre">memoryview</span></code></a>.</p>
<p><a class="reference internal" href="#io.BufferedIOBase.read" title="io.BufferedIOBase.read"><code class="xref py py-meth docutils literal"><span class="pre">read()</span></code></a> と同様、元になる生ストリームが &#8216;対話的&#8217; でない限り、複数回の read が発行されるかもしれません。</p>
<p>元になる生ストリームがノンブロッキングモードで、呼び出された時点でデータを持っていなければ、 <a class="reference internal" href="#io.BlockingIOError" title="io.BlockingIOError"><code class="xref py py-exc docutils literal"><span class="pre">BlockingIOError</span></code></a> が送出されます。</p>
</dd></dl>

<dl class="method">
<dt id="io.BufferedIOBase.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>b</em><span class="sig-paren">)</span><a class="headerlink" href="#io.BufferedIOBase.write" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Write <em>b</em>, and return the number of bytes written
(always equal to <code class="docutils literal"><span class="pre">len(b)</span></code>, since if the write fails
an <a class="reference internal" href="exceptions.html#exceptions.IOError" title="exceptions.IOError"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code></a> will be raised).  The object <em>b</em> should be
an array of bytes, either <code class="xref py py-class docutils literal"><span class="pre">bytes</span></code>, <a class="reference internal" href="functions.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal"><span class="pre">bytearray</span></code></a>,
or <a class="reference internal" href="stdtypes.html#memoryview" title="memoryview"><code class="xref py py-class docutils literal"><span class="pre">memoryview</span></code></a>.  Depending on the actual
implementation, these bytes may be readily written to the underlying
stream, or held in a buffer for performance and latency reasons.</p>
<p>ノンブロッキングモードであるとき、バッファが満杯で根底の生ストリームが書き込み時点でさらなるデータを受け付けられない場合 <a class="reference internal" href="#io.BlockingIOError" title="io.BlockingIOError"><code class="xref py py-exc docutils literal"><span class="pre">BlockingIOError</span></code></a> が送出されます。</p>
<p>このメソッドが戻った後で、呼び出し元は <em>b</em> を解放、または変更するかもしれないので、実装はメソッド呼び出しの間だけ <em>b</em> にアクセスすべきです。</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="raw-file-i-o">
<h2>15.2.3. 生ファイルI/O<a class="headerlink" href="#raw-file-i-o" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="class">
<dt id="io.FileIO">
<em class="property">class </em><code class="descclassname">io.</code><code class="descname">FileIO</code><span class="sig-paren">(</span><em>name</em>, <em>mode='r'</em>, <em>closefd=True</em><span class="sig-paren">)</span><a class="headerlink" href="#io.FileIO" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#io.FileIO" title="io.FileIO"><code class="xref py py-class docutils literal"><span class="pre">FileIO</span></code></a> はバイトデータを含む OS レベルのファイルを表します。 <a class="reference internal" href="#io.RawIOBase" title="io.RawIOBase"><code class="xref py py-class docutils literal"><span class="pre">RawIOBase</span></code></a> インタフェースを (したがって <a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> インタフェースも) 実装しています。</p>
<p><em>name</em> はこの 2 つのいずれかに出来ます:</p>
<ul class="simple">
<li><p class="first">開くファイルのパスを表す文字列</p>
</li>
<li><p class="first">結果の <a class="reference internal" href="#io.FileIO" title="io.FileIO"><code class="xref py py-class docutils literal"><span class="pre">FileIO</span></code></a> オブジェクトがアクセスを与える、既存の OS レベルファイルディスクリプタの数を表す整数</p>
</li>
</ul>
<p><em>mode</em> はそれぞれ読み込み (デフォルト)、書き込み、追記を表す <code class="docutils literal"><span class="pre">'r'</span></code>、 <code class="docutils literal"><span class="pre">'w'</span></code>、 <code class="docutils literal"><span class="pre">'a'</span></code> にすることができます。ファイルは書き込みまたは追記モードで開かれたときに存在しなければ作成されます。書き込みモードでは存在したファイル内容は消されます。読み込みと書き込みを同時に行いたければ <code class="docutils literal"><span class="pre">'+'</span></code> をモードに加えて下さい。</p>
<p>このクラスの <code class="xref py py-meth docutils literal"><span class="pre">read()</span></code> (正の引数で呼び出されたとき), <code class="xref py py-meth docutils literal"><span class="pre">readinto()</span></code> および <code class="xref py py-meth docutils literal"><span class="pre">write()</span></code> メソッドは、単にシステムコールを一度呼び出します。</p>
<p><a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> および <a class="reference internal" href="#io.RawIOBase" title="io.RawIOBase"><code class="xref py py-class docutils literal"><span class="pre">RawIOBase</span></code></a> から継承した属性とメソッドに加えて、 <a class="reference internal" href="#io.FileIO" title="io.FileIO"><code class="xref py py-class docutils literal"><span class="pre">FileIO</span></code></a> は以下のデータ属性とメソッドを提供しています:</p>
<dl class="attribute">
<dt id="io.FileIO.mode">
<code class="descname">mode</code><a class="headerlink" href="#io.FileIO.mode" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>コンストラクタに渡されたモードです。</p>
</dd></dl>

<dl class="attribute">
<dt id="io.FileIO.name">
<code class="descname">name</code><a class="headerlink" href="#io.FileIO.name" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ファイル名。コンストラクタに名前が渡されなかったときはファイル記述子になります。</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="buffered-streams">
<h2>15.2.4. バッファ付きストリーム<a class="headerlink" href="#buffered-streams" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>バッファ付き I/O ストリームは、I/O デバイスに生 I/O より高レベルなインタフェースを提供します。</p>
<dl class="class">
<dt id="io.BytesIO">
<em class="property">class </em><code class="descclassname">io.</code><code class="descname">BytesIO</code><span class="sig-paren">(</span><span class="optional">[</span><em>initial_bytes</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#io.BytesIO" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>インメモリの bytes バッファを利用したストリームの実装。 <a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> を継承します。</p>
<p>The optional argument <em>initial_bytes</em> is a <code class="xref py py-class docutils literal"><span class="pre">bytes</span></code> object that
contains initial data.</p>
<p><a class="reference internal" href="#io.BytesIO" title="io.BytesIO"><code class="xref py py-class docutils literal"><span class="pre">BytesIO</span></code></a> は <a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> または <a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> からのメソッドに加えて、以下のメソッドを提供もしくはオーバーライドします:</p>
<dl class="method">
<dt id="io.BytesIO.getvalue">
<code class="descname">getvalue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.BytesIO.getvalue" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>バッファの全内容を保持した <code class="docutils literal"><span class="pre">bytes</span></code> を返します。</p>
</dd></dl>

<dl class="method">
<dt id="io.BytesIO.read1">
<code class="descname">read1</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.BytesIO.read1" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#io.BytesIO" title="io.BytesIO"><code class="xref py py-class docutils literal"><span class="pre">BytesIO</span></code></a> においては、このメソッドは <code class="xref py py-meth docutils literal"><span class="pre">read()</span></code> と同じです。</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="io.BufferedReader">
<em class="property">class </em><code class="descclassname">io.</code><code class="descname">BufferedReader</code><span class="sig-paren">(</span><em>raw</em>, <em>buffer_size=DEFAULT_BUFFER_SIZE</em><span class="sig-paren">)</span><a class="headerlink" href="#io.BufferedReader" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>読み込み可能でシーケンシャルな <a class="reference internal" href="#io.RawIOBase" title="io.RawIOBase"><code class="xref py py-class docutils literal"><span class="pre">RawIOBase</span></code></a> オブジェクトへの、高レベルなアクセスを提供するバッファです。 <a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> を継承します。このオブジェクトからデータを読み込むとき、根底の生ストリームからより大きい量のデータが要求されることがあり、内部バッファに保存されます。バッファされたデータは、続く読み込み時に直接返されます。</p>
<p>このコンストラクタは与えられた <em>raw</em> ストリームと <em>buffer_size</em> に対し <a class="reference internal" href="#io.BufferedReader" title="io.BufferedReader"><code class="xref py py-class docutils literal"><span class="pre">BufferedReader</span></code></a> を生成します。 <em>buffer_size</em> が省略された場合、代わりに <a class="reference internal" href="#io.DEFAULT_BUFFER_SIZE" title="io.DEFAULT_BUFFER_SIZE"><code class="xref py py-data docutils literal"><span class="pre">DEFAULT_BUFFER_SIZE</span></code></a> が使われます。</p>
<p><a class="reference internal" href="#io.BufferedReader" title="io.BufferedReader"><code class="xref py py-class docutils literal"><span class="pre">BufferedReader</span></code></a> は <a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> または <a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> からのメソッドに加えて、以下のメソッドを提供もしくはオーバーライドします:</p>
<dl class="method">
<dt id="io.BufferedReader.peek">
<code class="descname">peek</code><span class="sig-paren">(</span><span class="optional">[</span><em>n</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#io.BufferedReader.peek" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>位置を進めずにストリームからバイト列を返します。これを果たすために生ストリームに対して行われる read は高々一度だけです。返されるバイト数は、要求より少ないかもしれませんし、多いかもしれません。</p>
</dd></dl>

<dl class="method">
<dt id="io.BufferedReader.read">
<code class="descname">read</code><span class="sig-paren">(</span><span class="optional">[</span><em>n</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#io.BufferedReader.read" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>n</em> バイトを読み込んで返します。 <em>n</em> が与えられないかまたは負の値ならば、EOF まで、または非ブロッキングモード中で read 呼び出しがブロックされるまでを返します。</p>
</dd></dl>

<dl class="method">
<dt id="io.BufferedReader.read1">
<code class="descname">read1</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#io.BufferedReader.read1" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>生ストリームに対しただ一度の呼び出しで最大 <em>n</em> バイトを読み込んで返します。少なくとも 1 バイトがバッファされていれば、バッファされているバイト列だけが返されます。それ以外の場合にはちょうど一回生ストリームに read 呼び出しが行われます。</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="io.BufferedWriter">
<em class="property">class </em><code class="descclassname">io.</code><code class="descname">BufferedWriter</code><span class="sig-paren">(</span><em>raw</em>, <em>buffer_size=DEFAULT_BUFFER_SIZE</em><span class="sig-paren">)</span><a class="headerlink" href="#io.BufferedWriter" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>書き込み可能でシーケンシャルな <a class="reference internal" href="#io.RawIOBase" title="io.RawIOBase"><code class="xref py py-class docutils literal"><span class="pre">RawIOBase</span></code></a> オブジェクトへの、高レベルなアクセスを提供するバッファです。 <a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> を継承します。このオブジェクトに書き込むとき、データは通常内部バッファに保持されます。このバッファは、以下のような種々の状況で根底の <a class="reference internal" href="#io.RawIOBase" title="io.RawIOBase"><code class="xref py py-class docutils literal"><span class="pre">RawIOBase</span></code></a> オブジェクトに書きこまれます:</p>
<ul class="simple">
<li><p class="first">保留中の全データに対してバッファが足りなくなったとき;</p>
</li>
<li><p class="first"><a class="reference internal" href="#io.BufferedWriter.flush" title="io.BufferedWriter.flush"><code class="xref py py-meth docutils literal"><span class="pre">flush()</span></code></a> が呼び出されたとき;</p>
</li>
<li><p class="first"><code class="xref py py-meth docutils literal"><span class="pre">seek()</span></code> が (<a class="reference internal" href="#io.BufferedRandom" title="io.BufferedRandom"><code class="xref py py-class docutils literal"><span class="pre">BufferedRandom</span></code></a> オブジェクトに対して) 呼び出されたとき;</p>
</li>
<li><p class="first"><a class="reference internal" href="#io.BufferedWriter" title="io.BufferedWriter"><code class="xref py py-class docutils literal"><span class="pre">BufferedWriter</span></code></a> オブジェクトが閉じられたり破棄されたりしたとき。</p>
</li>
</ul>
<p>このコンストラクタは与えられた書き込み可能な <em>raw</em> ストリームに対し <a class="reference internal" href="#io.BufferedWriter" title="io.BufferedWriter"><code class="xref py py-class docutils literal"><span class="pre">BufferedWriter</span></code></a> を生成します。 <em>buffer_size</em> が省略された場合、 <a class="reference internal" href="#io.DEFAULT_BUFFER_SIZE" title="io.DEFAULT_BUFFER_SIZE"><code class="xref py py-data docutils literal"><span class="pre">DEFAULT_BUFFER_SIZE</span></code></a> がデフォルトになります。</p>
<p>第三引数 <em>max_buffer_size</em> が提供されていますが、使われず、非推奨です。</p>
<p><a class="reference internal" href="#io.BufferedWriter" title="io.BufferedWriter"><code class="xref py py-class docutils literal"><span class="pre">BufferedWriter</span></code></a> は <a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> または <a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> からのメソッドに加えて、以下のメソッドを提供もしくはオーバーライドします:</p>
<dl class="method">
<dt id="io.BufferedWriter.flush">
<code class="descname">flush</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.BufferedWriter.flush" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>バッファに保持されたバイト列を生ストリームに強制的に流し込みます。生ストリームがブロックした場合 <a class="reference internal" href="#io.BlockingIOError" title="io.BlockingIOError"><code class="xref py py-exc docutils literal"><span class="pre">BlockingIOError</span></code></a> が送出されます。</p>
</dd></dl>

<dl class="method">
<dt id="io.BufferedWriter.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>b</em><span class="sig-paren">)</span><a class="headerlink" href="#io.BufferedWriter.write" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Write <em>b</em>, and return the number of bytes written.
The object <em>b</em> should be an array of bytes, either
<code class="xref py py-class docutils literal"><span class="pre">bytes</span></code>, <a class="reference internal" href="functions.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal"><span class="pre">bytearray</span></code></a>, or <a class="reference internal" href="stdtypes.html#memoryview" title="memoryview"><code class="xref py py-class docutils literal"><span class="pre">memoryview</span></code></a>.
When in non-blocking mode, a <a class="reference internal" href="#io.BlockingIOError" title="io.BlockingIOError"><code class="xref py py-exc docutils literal"><span class="pre">BlockingIOError</span></code></a> is raised
if the buffer needs to be written out but the raw stream blocks.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="io.BufferedRandom">
<em class="property">class </em><code class="descclassname">io.</code><code class="descname">BufferedRandom</code><span class="sig-paren">(</span><em>raw</em>, <em>buffer_size=DEFAULT_BUFFER_SIZE</em><span class="sig-paren">)</span><a class="headerlink" href="#io.BufferedRandom" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ランダムアクセスストリームへのバッファ付きインタフェース。 <a class="reference internal" href="#io.BufferedReader" title="io.BufferedReader"><code class="xref py py-class docutils literal"><span class="pre">BufferedReader</span></code></a> および <a class="reference internal" href="#io.BufferedWriter" title="io.BufferedWriter"><code class="xref py py-class docutils literal"><span class="pre">BufferedWriter</span></code></a> を継承し、さらに <code class="xref py py-meth docutils literal"><span class="pre">seek()</span></code> および <code class="xref py py-meth docutils literal"><span class="pre">tell()</span></code> をサポートしています。</p>
<p>このコンストラクタは第一引数として与えられるシーク可能な生ストリームに対し、リーダーおよびライターを作成します。 <em>buffer_size</em> が省略された場合、 <a class="reference internal" href="#io.DEFAULT_BUFFER_SIZE" title="io.DEFAULT_BUFFER_SIZE"><code class="xref py py-data docutils literal"><span class="pre">DEFAULT_BUFFER_SIZE</span></code></a> がデフォルトになります。</p>
<p>第三引数 <em>max_buffer_size</em> が提供されていますが、使われず、非推奨です。</p>
<p><a class="reference internal" href="#io.BufferedRandom" title="io.BufferedRandom"><code class="xref py py-class docutils literal"><span class="pre">BufferedRandom</span></code></a> は <a class="reference internal" href="#io.BufferedReader" title="io.BufferedReader"><code class="xref py py-class docutils literal"><span class="pre">BufferedReader</span></code></a> や <a class="reference internal" href="#io.BufferedWriter" title="io.BufferedWriter"><code class="xref py py-class docutils literal"><span class="pre">BufferedWriter</span></code></a> にできることは何でもできます。</p>
</dd></dl>

<dl class="class">
<dt id="io.BufferedRWPair">
<em class="property">class </em><code class="descclassname">io.</code><code class="descname">BufferedRWPair</code><span class="sig-paren">(</span><em>reader</em>, <em>writer</em>, <em>buffer_size=DEFAULT_BUFFER_SIZE</em><span class="sig-paren">)</span><a class="headerlink" href="#io.BufferedRWPair" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>2つの単方向 <a class="reference internal" href="#io.RawIOBase" title="io.RawIOBase"><code class="xref py py-class docutils literal"><span class="pre">RawIOBase</span></code></a> オブジェクト &#8211; 一つは読み込み可能、他方が書き込み可能 &#8211; を組み合わせてバッファ付きの双方向 I/O オブジェクトにしたものです。 <a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> を継承しています。</p>
<p><em>reader</em> と <em>writer</em> はそれぞれ読み込み可能、書き込み可能な <a class="reference internal" href="#io.RawIOBase" title="io.RawIOBase"><code class="xref py py-class docutils literal"><span class="pre">RawIOBase</span></code></a> オブジェクトです。 <em>buffer_size</em> が省略された場合 <a class="reference internal" href="#io.DEFAULT_BUFFER_SIZE" title="io.DEFAULT_BUFFER_SIZE"><code class="xref py py-data docutils literal"><span class="pre">DEFAULT_BUFFER_SIZE</span></code></a> がデフォルトになります。</p>
<p>第四引数 <em>max_buffer_size</em> が提供されていますが、使われず、非推奨です。</p>
<p><a class="reference internal" href="#io.BufferedRWPair" title="io.BufferedRWPair"><code class="xref py py-class docutils literal"><span class="pre">BufferedRWPair</span></code></a> は、 <a class="reference internal" href="#io.UnsupportedOperation" title="io.UnsupportedOperation"><code class="xref py py-exc docutils literal"><span class="pre">UnsupportedOperation</span></code></a> を送出する <a class="reference internal" href="#io.BufferedIOBase.detach" title="io.BufferedIOBase.detach"><code class="xref py py-meth docutils literal"><span class="pre">detach()</span></code></a> を除く、 <a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> の全てのメソッドを実装します。</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last"><a class="reference internal" href="#io.BufferedRWPair" title="io.BufferedRWPair"><code class="xref py py-class docutils literal"><span class="pre">BufferedRWPair</span></code></a> は下層の生ストリームのアクセスを同期しようとはしません。同じオブジェクトをリーダとライタとして渡してはいけません。その場合は代わりに <a class="reference internal" href="#io.BufferedRandom" title="io.BufferedRandom"><code class="xref py py-class docutils literal"><span class="pre">BufferedRandom</span></code></a> を使用してください。</p>
</div>
</dd></dl>

</div>
<div class="section" id="text-i-o">
<h2>15.2.5. テキスト I/O<a class="headerlink" href="#text-i-o" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="class">
<dt id="io.TextIOBase">
<em class="property">class </em><code class="descclassname">io.</code><code class="descname">TextIOBase</code><a class="headerlink" href="#io.TextIOBase" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Base class for text streams.  This class provides a unicode character
and line based interface to stream I/O.  There is no <code class="xref py py-meth docutils literal"><span class="pre">readinto()</span></code>
method because Python&#8217;s <a class="reference internal" href="functions.html#unicode" title="unicode"><code class="xref py py-class docutils literal"><span class="pre">unicode</span></code></a> strings are immutable.
It inherits <a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a>.  There is no public constructor.</p>
<p><a class="reference internal" href="#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal"><span class="pre">IOBase</span></code></a> から継承した属性とメソッドに加えて、 <a class="reference internal" href="#io.TextIOBase" title="io.TextIOBase"><code class="xref py py-class docutils literal"><span class="pre">TextIOBase</span></code></a> は以下のデータ属性とメソッドを提供しています:</p>
<dl class="attribute">
<dt id="io.TextIOBase.encoding">
<code class="descname">encoding</code><a class="headerlink" href="#io.TextIOBase.encoding" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>エンコーディング名で、ストリームのバイト列を文字列にデコードするとき、また文字列をバイト列にエンコードするときに使われます。</p>
</dd></dl>

<dl class="attribute">
<dt id="io.TextIOBase.errors">
<code class="descname">errors</code><a class="headerlink" href="#io.TextIOBase.errors" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このエンコーダやデコーダのエラー設定です。</p>
</dd></dl>

<dl class="attribute">
<dt id="io.TextIOBase.newlines">
<code class="descname">newlines</code><a class="headerlink" href="#io.TextIOBase.newlines" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>文字列、文字列のタプル、または <code class="docutils literal"><span class="pre">None</span></code> で、改行がどのように読み換えられるかを指定します。実装や内部コンストラクタのフラグに依って、これは利用できないことがあります。</p>
</dd></dl>

<dl class="attribute">
<dt id="io.TextIOBase.buffer">
<code class="descname">buffer</code><a class="headerlink" href="#io.TextIOBase.buffer" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#io.TextIOBase" title="io.TextIOBase"><code class="xref py py-class docutils literal"><span class="pre">TextIOBase</span></code></a> が扱う根底のバイナリバッファ (<a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> インスタンス) です。これは <a class="reference internal" href="#io.TextIOBase" title="io.TextIOBase"><code class="xref py py-class docutils literal"><span class="pre">TextIOBase</span></code></a> API には含まれず、よって実装に含まれないことがあります。</p>
</dd></dl>

<dl class="method">
<dt id="io.TextIOBase.detach">
<code class="descname">detach</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.TextIOBase.detach" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>根底のバイナリバッファを <a class="reference internal" href="#io.TextIOBase" title="io.TextIOBase"><code class="xref py py-class docutils literal"><span class="pre">TextIOBase</span></code></a> から分離して返します。</p>
<p>根底のバッファが取り外された後、 <a class="reference internal" href="#io.TextIOBase" title="io.TextIOBase"><code class="xref py py-class docutils literal"><span class="pre">TextIOBase</span></code></a> は使用不能状態になります。</p>
<p>Some <a class="reference internal" href="#io.TextIOBase" title="io.TextIOBase"><code class="xref py py-class docutils literal"><span class="pre">TextIOBase</span></code></a> implementations, like <a class="reference internal" href="#io.StringIO" title="io.StringIO"><code class="xref py py-class docutils literal"><span class="pre">StringIO</span></code></a>, may not
have the concept of an underlying buffer and calling this method will
raise <a class="reference internal" href="#io.UnsupportedOperation" title="io.UnsupportedOperation"><code class="xref py py-exc docutils literal"><span class="pre">UnsupportedOperation</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 2.7 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="io.TextIOBase.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#io.TextIOBase.read" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>最大 <em>n</em> 文字をストリームから読み込み、一つの <a class="reference internal" href="functions.html#unicode" title="unicode"><code class="xref py py-class docutils literal"><span class="pre">unicode</span></code></a> にして返します。 <em>n</em> が負の値または <code class="docutils literal"><span class="pre">None</span></code> ならば、 EOF まで読みます。</p>
</dd></dl>

<dl class="method">
<dt id="io.TextIOBase.readline">
<code class="descname">readline</code><span class="sig-paren">(</span><em>limit=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#io.TextIOBase.readline" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>改行または EOF まで読み込み、一つの <code class="docutils literal"><span class="pre">unicode</span></code> を返します。ストリームが既に EOF に到達している場合、空文字列が返されます。</p>
<p>もし <em>limit</em> が指定された場合、最大で <em>limit</em> バイトが読み込まれます。</p>
</dd></dl>

<dl class="method">
<dt id="io.TextIOBase.seek">
<code class="descname">seek</code><span class="sig-paren">(</span><em>offset</em><span class="optional">[</span>, <em>whence</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#io.TextIOBase.seek" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定された <em>offset</em> にストリーム位置を変更します。 挙動は <em>whence</em> 引数によります。 <em>whence</em> のデフォルト値は <code class="xref py py-data docutils literal"><span class="pre">SEEK_SET</span></code> です。:</p>
<ul class="simple">
<li><p class="first"><code class="xref py py-data docutils literal"><span class="pre">SEEK_SET</span></code> または <code class="docutils literal"><span class="pre">0</span></code>: ストリームの先頭からシークします (デフォルト)。 <em>offset</em> は <a class="reference internal" href="#io.TextIOBase.tell" title="io.TextIOBase.tell"><code class="xref py py-meth docutils literal"><span class="pre">TextIOBase.tell()</span></code></a> が返す数か0のどちらかでなければなりません。それ以外の <em>offset</em> 値は未定義の挙動を起こします。</p>
</li>
<li><p class="first"><code class="xref py py-data docutils literal"><span class="pre">SEEK_CUR</span></code> または <code class="docutils literal"><span class="pre">1</span></code>: 現在の位置に &#8220;シークします&#8221;。 <em>offset</em> は 0 でなければなりません。つまり何もしません (他の値はサポートされていません)。</p>
</li>
<li><p class="first"><code class="xref py py-data docutils literal"><span class="pre">SEEK_END</span></code> または <code class="docutils literal"><span class="pre">2</span></code>: ストリーム終端へシークします。 <em>offset</em> は 0 でなければなりません (他の値はサポートされていません)．</p>
</li>
</ul>
<p>新しい絶対位置を、不透明な数値で返します。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 2.7 で追加: </span><code class="docutils literal"><span class="pre">SEEK_*</span></code> 定数.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="io.TextIOBase.tell">
<code class="descname">tell</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.TextIOBase.tell" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ストリームの現在位置を不透明な数値で返します。この値は根底のバイナリストレージ内でのバイト数を表すとは限りません。</p>
</dd></dl>

<dl class="method">
<dt id="io.TextIOBase.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#io.TextIOBase.write" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="functions.html#unicode" title="unicode"><code class="xref py py-class docutils literal"><span class="pre">unicode</span></code></a> 文字列 <em>s</em> をストリームに書き込み、書き込まれた文字数を返します。</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="io.TextIOWrapper">
<em class="property">class </em><code class="descclassname">io.</code><code class="descname">TextIOWrapper</code><span class="sig-paren">(</span><em>buffer</em>, <em>encoding=None</em>, <em>errors=None</em>, <em>newline=None</em>, <em>line_buffering=False</em><span class="sig-paren">)</span><a class="headerlink" href="#io.TextIOWrapper" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal"><span class="pre">BufferedIOBase</span></code></a> バイナリストリーム上のバッファ付きテキストストリーム。 <a class="reference internal" href="#io.TextIOBase" title="io.TextIOBase"><code class="xref py py-class docutils literal"><span class="pre">TextIOBase</span></code></a> を継承します。</p>
<p><em>encoding</em> にはストリームをデコードしたりそれを使ってエンコードしたりするエンコーディング名を渡します。デフォルトは <a class="reference internal" href="locale.html#locale.getpreferredencoding" title="locale.getpreferredencoding"><code class="xref py py-func docutils literal"><span class="pre">locale.getpreferredencoding()</span></code></a> です。</p>
<p><em>errors</em> はオプションの文字列で、エンコードやデコードの際のエラーをどのように扱うかを指定します。エンコードエラーがあったら <a class="reference internal" href="exceptions.html#exceptions.ValueError" title="exceptions.ValueError"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code></a> 例外を送出させるには <code class="docutils literal"><span class="pre">'strict'</span></code> を渡します(デフォルトの <code class="docutils literal"><span class="pre">None</span></code> でも同じです)。エラーを無視させるには <code class="docutils literal"><span class="pre">'ignore'</span></code> です。 (注意しなければならないのは、エンコーディングエラーを無視するとデータ喪失につながる可能性があるということです。) <code class="docutils literal"><span class="pre">'replace'</span></code> は正常に変換されなかった文字の代わりにマーカ (たとえば <code class="docutils literal"><span class="pre">'?'</span></code>) を挿入させます。書き込み時には <code class="docutils literal"><span class="pre">'xmlcharrefreplace'</span></code> (適切な XML 文字参照に置き換え) や <code class="docutils literal"><span class="pre">'backslashreplace'</span></code> (バックスラッシュによるエスケープシーケンスに置き換え) も使えます。他にも <a class="reference internal" href="codecs.html#codecs.register_error" title="codecs.register_error"><code class="xref py py-func docutils literal"><span class="pre">codecs.register_error()</span></code></a> で登録されたエラー処理名が有効です。</p>
<p id="index-1"><em>newline</em> は行末をどのように処理するかを制御します 。これは <code class="docutils literal"><span class="pre">None</span></code>, <code class="docutils literal"><span class="pre">''</span></code>, <code class="docutils literal"><span class="pre">'\n'</span></code>, <code class="docutils literal"><span class="pre">'\r'</span></code>, <code class="docutils literal"><span class="pre">'\r\n'</span></code> のいずれかです。これは以下のように働きます:</p>
<ul class="simple">
<li><p class="first">ストリームからの入力を読み込んでいる時、<em>newline</em> が <code class="docutils literal"><span class="pre">None</span></code> の場合、<a class="reference internal" href="../glossary.html#term-universal-newlines"><span class="xref std std-term">universal newlines</span></a> モードが有効になります。入力中の行は <code class="docutils literal"><span class="pre">'\n'</span></code>、<code class="docutils literal"><span class="pre">'\r'</span></code>、または <code class="docutils literal"><span class="pre">'\r\n'</span></code> で終わり、呼び出し元に返される前に <code class="docutils literal"><span class="pre">'\n'</span></code> に変換されます。 <code class="docutils literal"><span class="pre">''</span></code> の場合、ユニバーサル改行モードは有効になりますが、行末は変換されずに呼び出し元に返されます。その他の合法な値の場合、入力行は与えられた文字列でのみ終わり、行末は変換されずに呼び出し元に返されます。</p>
</li>
<li><p class="first">出力時、 <em>newline</em> が <code class="docutils literal"><span class="pre">None</span></code> の場合は、すべての <code class="docutils literal"><span class="pre">'\n'</span></code> 文字はシステムのデフォルト行区切り文字 <a class="reference internal" href="os.html#os.linesep" title="os.linesep"><code class="xref py py-data docutils literal"><span class="pre">os.linesep</span></code></a> に変換されます。もし <em>newline</em> が <code class="docutils literal"><span class="pre">''</span></code> の場合、変換は起こりません。もし <em>newline</em> に他の適切な値が指定された場合は、 <code class="docutils literal"><span class="pre">'\n'</span></code> 文字は与えられた文字に変換されます。</p>
</li>
</ul>
<p><em>line_buffering</em> が <code class="docutils literal"><span class="pre">True</span></code> の場合、 write への呼び出しが改行文字を含んでいれば <code class="xref py py-meth docutils literal"><span class="pre">flush()</span></code> がそれに伴って呼び出されます。</p>
<p><a class="reference internal" href="#io.TextIOBase" title="io.TextIOBase"><code class="xref py py-class docutils literal"><span class="pre">TextIOBase</span></code></a> およびその親クラスの属性に加えて、 <a class="reference internal" href="#io.TextIOWrapper" title="io.TextIOWrapper"><code class="xref py py-class docutils literal"><span class="pre">TextIOWrapper</span></code></a> は以下の属性を提供しています:</p>
<dl class="attribute">
<dt id="io.TextIOWrapper.line_buffering">
<code class="descname">line_buffering</code><a class="headerlink" href="#io.TextIOWrapper.line_buffering" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>行バッファリングが有効かどうか。</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="io.StringIO">
<em class="property">class </em><code class="descclassname">io.</code><code class="descname">StringIO</code><span class="sig-paren">(</span><em>initial_value=u''</em>, <em>newline=u'\n'</em><span class="sig-paren">)</span><a class="headerlink" href="#io.StringIO" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Unicode テキストのためのインメモリストリーム。 <a class="reference internal" href="#io.TextIOWrapper" title="io.TextIOWrapper"><code class="xref py py-class docutils literal"><span class="pre">TextIOWrapper</span></code></a> を継承します。</p>
<p>バッファの初期値を <em>initial_value</em> で与えることが出来ます。改行変換を有効にすると、改行コードは <a class="reference internal" href="#io.TextIOBase.write" title="io.TextIOBase.write"><code class="xref py py-meth docutils literal"><span class="pre">write()</span></code></a> によってエンコードされます。ストリームはバッファの開始位置に配置されます。</p>
<p><em>newline</em> 引数は <a class="reference internal" href="#io.TextIOWrapper" title="io.TextIOWrapper"><code class="xref py py-class docutils literal"><span class="pre">TextIOWrapper</span></code></a> のものと同じように働きます。デフォルトでは <code class="docutils literal"><span class="pre">\n</span></code> 文字だけを行末とみなし、また、改行の変換は行いません。 <em>newline</em> に <code class="docutils literal"><span class="pre">None</span></code> をセットすると改行コードを全てのプラットフォームで <code class="docutils literal"><span class="pre">\n</span></code> で書き込みますが、読み込み時にはそれでもユニバーサル改行としてのデコードは実行されます。</p>
<p><a class="reference internal" href="#io.StringIO" title="io.StringIO"><code class="xref py py-class docutils literal"><span class="pre">StringIO</span></code></a> provides this method in addition to those from
<a class="reference internal" href="#io.TextIOWrapper" title="io.TextIOWrapper"><code class="xref py py-class docutils literal"><span class="pre">TextIOWrapper</span></code></a> and its parents:</p>
<dl class="method">
<dt id="io.StringIO.getvalue">
<code class="descname">getvalue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#io.StringIO.getvalue" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Return a <code class="docutils literal"><span class="pre">unicode</span></code> containing the entire contents of the buffer at any
time before the <a class="reference internal" href="#io.StringIO" title="io.StringIO"><code class="xref py py-class docutils literal"><span class="pre">StringIO</span></code></a> object&#8217;s <code class="xref py py-meth docutils literal"><span class="pre">close()</span></code> method is
called.  Newlines are decoded as if by <a class="reference internal" href="#io.TextIOBase.read" title="io.TextIOBase.read"><code class="xref py py-meth docutils literal"><span class="pre">read()</span></code></a>,
although the stream position is not changed.</p>
</dd></dl>

<p>使用例:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">io</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
<span class="n">output</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;First line.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">output</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;Second line.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># Retrieve file contents -- this will be</span>
<span class="c1"># u&#39;First line.\nSecond line.\n&#39;</span>
<span class="n">contents</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>

<span class="c1"># Close object and discard memory buffer --</span>
<span class="c1"># .getvalue() will now raise an exception.</span>
<span class="n">output</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="index-2"></span><dl class="class">
<dt id="io.IncrementalNewlineDecoder">
<em class="property">class </em><code class="descclassname">io.</code><code class="descname">IncrementalNewlineDecoder</code><a class="headerlink" href="#io.IncrementalNewlineDecoder" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>改行を <a class="reference internal" href="../glossary.html#term-universal-newlines"><span class="xref std std-term">universal newlines</span></a> モードにデコードするヘルパーコーデックです。 <a class="reference internal" href="codecs.html#codecs.IncrementalDecoder" title="codecs.IncrementalDecoder"><code class="xref py py-class docutils literal"><span class="pre">codecs.IncrementalDecoder</span></code></a> を継承しています。</p>
</dd></dl>

</div>
<div class="section" id="advanced-topics">
<h2>15.2.6. 進んだ話題<a class="headerlink" href="#advanced-topics" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>ここで、上述の I/O 実装に関係するいくつかの進んだ話題について議論します。</p>
<div class="section" id="performance">
<h3>15.2.6.1. パフォーマンス<a class="headerlink" href="#performance" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="binary-i-o">
<h4>15.2.6.1.1. バイナリ I/O<a class="headerlink" href="#binary-i-o" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>バッファ付き I/O は、ユーザが 1 バイトだけ要求したときでさえ、データを大きな塊でのみ読み書きします。これにより、オペレーティングシステムのバッファ無し I/O ルーチンを呼び出して実行する非効率性をすべて隠しています。その成果は、OS と処理される I/O の種類に本当にとても大きく依存します (例えば、Linux のような現行の OS では、バッファ無しディスク I/O がバッファ付き I/O と同じくらい早いことがあります)。しかし、最低でも、バッファ付き I/O は予測できるパフォーマンスを提供します。ですから、ほとんどいつも、バッファ無し I/O より、バッファ付きの I/O を使うほうが望ましいです。</p>
</div>
<div class="section" id="id1">
<h4>15.2.6.1.2. テキスト I/O<a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>(ファイルなどの) バイナリストレージ上のテキスト I/O は、同じストレージ上のバイナリ I/O より非常に遅いです。なぜならこれは、文字コーデックを使った Unicode からバイナリデータへの変換を暗示しているからです。これは大量のテキストデータ (例えば非常に大きなログファイル) を扱うときに顕著に成り得ます。同様に、 <code class="xref py py-meth docutils literal"><span class="pre">TextIOWrapper.tell()</span></code> や <code class="xref py py-meth docutils literal"><span class="pre">TextIOWrapper.seek()</span></code> はどちらも、使われている復元アルゴリズムのために遅くなります。</p>
<p><a class="reference internal" href="#io.StringIO" title="io.StringIO"><code class="xref py py-class docutils literal"><span class="pre">StringIO</span></code></a>, however, is a native in-memory unicode container and will
exhibit similar speed to <a class="reference internal" href="#io.BytesIO" title="io.BytesIO"><code class="xref py py-class docutils literal"><span class="pre">BytesIO</span></code></a>.</p>
</div>
</div>
<div class="section" id="multi-threading">
<h3>15.2.6.2. マルチスレッディング<a class="headerlink" href="#multi-threading" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>(Unix における <code class="docutils literal"><span class="pre">read(2)</span></code> のような) オペレーティングシステムコールの、それがラッピングしているものがスレッドセーフであるような範囲内では、 <a class="reference internal" href="#io.FileIO" title="io.FileIO"><code class="xref py py-class docutils literal"><span class="pre">FileIO</span></code></a> オブジェクトもまた、スレッドセーフです。</p>
<p>バイナリバッファ付きオブジェクト (<a class="reference internal" href="#io.BufferedReader" title="io.BufferedReader"><code class="xref py py-class docutils literal"><span class="pre">BufferedReader</span></code></a>, <a class="reference internal" href="#io.BufferedWriter" title="io.BufferedWriter"><code class="xref py py-class docutils literal"><span class="pre">BufferedWriter</span></code></a>, <a class="reference internal" href="#io.BufferedRandom" title="io.BufferedRandom"><code class="xref py py-class docutils literal"><span class="pre">BufferedRandom</span></code></a> および <a class="reference internal" href="#io.BufferedRWPair" title="io.BufferedRWPair"><code class="xref py py-class docutils literal"><span class="pre">BufferedRWPair</span></code></a> のインスタンス) は、その内部構造をロックを使って保護します。このため、これらを複数のスレッドから同時に呼び出しても安全です。</p>
<p><a class="reference internal" href="#io.TextIOWrapper" title="io.TextIOWrapper"><code class="xref py py-class docutils literal"><span class="pre">TextIOWrapper</span></code></a> オブジェクトはスレッドセーフではありません。</p>
</div>
<div class="section" id="reentrancy">
<h3>15.2.6.3. リエントラント性<a class="headerlink" href="#reentrancy" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>バイナリバッファ付きオブジェクト (<a class="reference internal" href="#io.BufferedReader" title="io.BufferedReader"><code class="xref py py-class docutils literal"><span class="pre">BufferedReader</span></code></a>, <a class="reference internal" href="#io.BufferedWriter" title="io.BufferedWriter"><code class="xref py py-class docutils literal"><span class="pre">BufferedWriter</span></code></a>, <a class="reference internal" href="#io.BufferedRandom" title="io.BufferedRandom"><code class="xref py py-class docutils literal"><span class="pre">BufferedRandom</span></code></a> および <a class="reference internal" href="#io.BufferedRWPair" title="io.BufferedRWPair"><code class="xref py py-class docutils literal"><span class="pre">BufferedRWPair</span></code></a> のインスタンス) は、リエントラントではありません。リエントラントな呼び出しは普通の状況では起こりませんが、 I/O を <a class="reference internal" href="signal.html#module-signal" title="signal: Set handlers for asynchronous events."><code class="xref py py-mod docutils literal"><span class="pre">signal</span></code></a> ハンドラで行なっているときに起こりえます。バッファ化されたオブジェクトに、すでに <em>同じスレッドから</em> アクセスされているのにもかかわらず、再び入ろうとすると <a class="reference internal" href="exceptions.html#exceptions.RuntimeError" title="exceptions.RuntimeError"><code class="xref py py-exc docutils literal"><span class="pre">RuntimeError</span></code></a> が送出されます。</p>
<p><a class="reference internal" href="functions.html#open" title="open"><code class="xref py py-func docutils literal"><span class="pre">open()</span></code></a> 関数は <a class="reference internal" href="#io.TextIOWrapper" title="io.TextIOWrapper"><code class="xref py py-class docutils literal"><span class="pre">TextIOWrapper</span></code></a> 内部のバッファ付きオブジェクトをラップするため、テキストファイルにも暗黙に拡張されます。これは、標準ストリームを含むので、組み込み関数 <a class="reference internal" href="functions.html#print" title="print"><code class="xref py py-func docutils literal"><span class="pre">print()</span></code></a> にも同様に影響します。</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">15.2. <code class="docutils literal"><span class="pre">io</span></code> &#8212; ストリームを扱うコアツール</a><ul>
<li><a class="reference internal" href="#module-interface">15.2.1. モジュールインタフェース</a></li>
<li><a class="reference internal" href="#i-o-base-classes">15.2.2. I/O 基底クラス</a></li>
<li><a class="reference internal" href="#raw-file-i-o">15.2.3. 生ファイルI/O</a></li>
<li><a class="reference internal" href="#buffered-streams">15.2.4. バッファ付きストリーム</a></li>
<li><a class="reference internal" href="#text-i-o">15.2.5. テキスト I/O</a></li>
<li><a class="reference internal" href="#advanced-topics">15.2.6. 進んだ話題</a><ul>
<li><a class="reference internal" href="#performance">15.2.6.1. パフォーマンス</a><ul>
<li><a class="reference internal" href="#binary-i-o">15.2.6.1.1. バイナリ I/O</a></li>
<li><a class="reference internal" href="#id1">15.2.6.1.2. テキスト I/O</a></li>
</ul>
</li>
<li><a class="reference internal" href="#multi-threading">15.2.6.2. マルチスレッディング</a></li>
<li><a class="reference internal" href="#reentrancy">15.2.6.3. リエントラント性</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="os.html"
                        title="前の章へ">15.1. <code class="docutils literal"><span class="pre">os</span></code> &#8212; 雑多なオペレーティングシステムインタフェース</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="time.html"
                        title="次の章へ">15.3. <code class="docutils literal"><span class="pre">time</span></code> &#8212; 時刻データへのアクセスと変換</a></p>
<h3>このページ</h3>
<ul class="this-page-menu">
  <li><a href="../bugs.html">バグ報告</a></li>
  <li><a href="https://github.com/python/cpython/blob/2.7/Doc/library/io.rst"
         rel="nofollow">ソースの表示</a>
  </li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="検索" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="time.html" title="15.3. time — 時刻データへのアクセスと変換"
             >次へ</a> |</li>
        <li class="right" >
          <a href="os.html" title="15.1. os — 雑多なオペレーティングシステムインタフェース"
             >前へ</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="http://www.python.jp/">Python</a> &#187;</li>
        <li>
          <span class="version_switcher_placeholder">2.7.13</span>
          <a href="../index.html">ドキュメント</a> &#187;
        </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python 標準ライブラリ</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="allos.html" >15. 汎用オペレーティングシステムサービス</a> &#187;</li> 
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 1990-2017, Python Software Foundation (translated by Python ドキュメント日本語翻訳プロジェクト).
    <br />
    Python Software Foundation は非営利団体です。
    <a href="https://www.python.org/psf/donations/">寄付</a>
    <br />
    Last updated on 2017-03-24.
    <a href="../bugs.html">バグを見つけたら</a>?
    <br />
    このドキュメントは <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.9 を使って作成されました。
    </div>

  </body>
</html>