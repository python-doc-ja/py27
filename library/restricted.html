<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>30. 制限実行 (restricted execution) &#8212; Python 2.7.x ドキュメント</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.7.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Python 2.7.x ドキュメント 内を検索"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="著作権" href="../copyright.html" />
    <link rel="top" title="Python 2.7.x ドキュメント" href="../contents.html" />
    <link rel="up" title="Python 標準ライブラリ" href="index.html" />
    <link rel="next" title="30.1. rexec — 制限実行のフレームワーク" href="rexec.html" />
    <link rel="prev" title="29.2. codeop — Pythonコードをコンパイルする" href="codeop.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    <link rel="canonical" href="https://docs.python.org/2/library/restricted.html" />
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script type="text/javascript" src="../_static/_jp.js"></script>
    
    <script type="text/javascript" src="../_static/version_switch.js"></script>
 
    

  </head>
  <body role="document">  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="rexec.html" title="30.1. rexec — 制限実行のフレームワーク"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="codeop.html" title="29.2. codeop — Pythonコードをコンパイルする"
             accesskey="P">前へ</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="http://www.python.jp/">Python</a> &#187;</li>
        <li>
          <span class="version_switcher_placeholder">2.7.x</span>
          <a href="../index.html">Documentation</a> &#187;
        </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Python 標準ライブラリ</a> &#187;</li> 
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="restricted-execution">
<span id="restricted"></span><h1>30. 制限実行 (restricted execution)<a class="headerlink" href="#restricted-execution" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">Python 2.3 で、既知の容易に修正できないセキュリティーホールのために、これらのモジュールは無効にされています。 <a class="reference internal" href="rexec.html#module-rexec" title="rexec: Basic restricted execution framework. (撤廃)"><code class="xref py py-mod docutils literal"><span class="pre">rexec</span></code></a> や <a class="reference internal" href="bastion.html#module-Bastion" title="Bastion: Providing restricted access to objects. (撤廃)"><code class="xref py py-mod docutils literal"><span class="pre">Bastion</span></code></a> モジュールを使った古いコードを読むときに助けになるよう、モジュールのドキュメントだけは残されています。</p>
</div>
<p><em>制限実行 (restricted execution)</em> とは、信頼できるコードと信頼できないコードを区別できるようにするための Python における基本的なフレームワークです。このフレームワークは、信頼できる Python コード (<em>スーパバイザ (supervisor)</em>) が、パーミッションに制限のかけられた &#8220;拘束セル (padded cell)&#8221; を生成し、このセル中で信頼のおけないコードを実行するという概念に基づいています。信頼のおけないコードはこの拘束セルを破ることができず、信頼されたコードで提供され、管理されたインタフェースを介してのみ、傷つきやすいシステムリソースとやりとりすることができます。 &#8220;制限実行&#8221; という用語は、&#8221;安全な Python (safe-Python)&#8221; を裏から支えるものです。というのは、真の安全を定義することは難しく、制限された環境を生成する方法によって決められるからです。制限された環境は入れ子にすることができ、このとき内側のセルはより縮小されることはあるが決して拡大されることのない特権を持ったサブセルを生成します。</p>
<p>An interesting aspect of Python&#8217;s restricted execution model is that the
interfaces presented to untrusted code usually have the same names as those
presented to trusted code.  Therefore no special interfaces need to be learned
to write code designed to run in a restricted environment.  And because the
exact nature of the padded cell is determined by the supervisor, different
restrictions can be imposed, depending on the application.  For example, it
might be deemed &#8220;safe&#8221; for untrusted code to read any file within a specified
directory, but never to write a file.  In this case, the supervisor may redefine
the built-in <a class="reference internal" href="functions.html#open" title="open"><code class="xref py py-func docutils literal"><span class="pre">open()</span></code></a> function so that it raises an exception whenever the
<em>mode</em> parameter is <code class="docutils literal"><span class="pre">'w'</span></code>.  It might also perform a <code class="xref c c-func docutils literal"><span class="pre">chroot()</span></code>-like
operation on the <em>filename</em> parameter, such that root is always relative to some
safe &#8220;sandbox&#8221; area of the filesystem.  In this case, the untrusted code would
still see a built-in <a class="reference internal" href="functions.html#open" title="open"><code class="xref py py-func docutils literal"><span class="pre">open()</span></code></a> function in its environment, with the same
calling interface.  The semantics would be identical too, with <a class="reference internal" href="exceptions.html#exceptions.IOError" title="exceptions.IOError"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code></a>s
being raised when the supervisor determined that an unallowable parameter is
being used.</p>
<p>Python のランタイムシステムは、特定のコードブロックが制限実行モードかどうかを、グローバル変数の中の <code class="docutils literal"><span class="pre">__builtins__</span></code> オブジェクトの一意性をもとに判断します: オブジェクトが標準の <a class="reference internal" href="__builtin__.html#module-__builtin__" title="__builtin__: The module that provides the built-in namespace."><code class="xref py py-mod docutils literal"><span class="pre">__builtin__</span></code></a> モジュール (の辞書) の場合、コードは非制限下にあるとみなされます。それ以外は制限下にあるとみなされます。</p>
<p>Python code executing in restricted mode faces a number of limitations that are
designed to prevent it from escaping from the padded cell. For instance, the
function object attribute <code class="xref py py-attr docutils literal"><span class="pre">func_globals</span></code> and the class and instance object
attribute <a class="reference internal" href="stdtypes.html#object.__dict__" title="object.__dict__"><code class="xref py py-attr docutils literal"><span class="pre">__dict__</span></code></a> are unavailable.</p>
<p>二つのモジュールが、制限実行環境を立ち上げるためのフレームワークを提供しています:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="rexec.html">30.1. <code class="docutils literal"><span class="pre">rexec</span></code> &#8212; 制限実行のフレームワーク</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rexec.html#rexec-objects">30.1.1. RExec オブジェクト</a></li>
<li class="toctree-l2"><a class="reference internal" href="rexec.html#defining-restricted-environments">30.1.2. 制限された環境を定義する</a></li>
<li class="toctree-l2"><a class="reference internal" href="rexec.html#an-example">30.1.3. 例</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bastion.html">30.2. <code class="docutils literal"><span class="pre">Bastion</span></code> &#8212; オブジェクトに対するアクセスの制限</a></li>
</ul>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<dl class="last docutils">
<dt><a class="reference external" href="http://grail.sourceforge.net/">Grail Home Page</a></dt>
<dd><p class="first last">Python で書かれたインターネットブラウザ Grail です。Python で書かれたアプレットをサポートするために、上記のモジュールを使っています。 Grail における Python 制限実行モードの利用に関する詳しい情報は、Web サイトで入手することができます。</p>
</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>前のトピックへ</h4>
  <p class="topless"><a href="codeop.html"
                        title="前の章へ">29.2. <code class="docutils literal"><span class="pre">codeop</span></code> &#8212; Pythonコードをコンパイルする</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="rexec.html"
                        title="次の章へ">30.1. <code class="docutils literal"><span class="pre">rexec</span></code> &#8212; 制限実行のフレームワーク</a></p>
<h3>このページ</h3>
<ul class="this-page-menu">
  <li><a href="../bugs.html">Report a Bug</a></li>
  <li><a href="https://github.com/python/cpython/blob/2.7/Doc/library/restricted.rst"
         rel="nofollow">ソースコードを表示</a>
  </li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="検索" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="rexec.html" title="30.1. rexec — 制限実行のフレームワーク"
             >次へ</a> |</li>
        <li class="right" >
          <a href="codeop.html" title="29.2. codeop — Pythonコードをコンパイルする"
             >前へ</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="http://www.python.jp/">Python</a> &#187;</li>
        <li>
          <span class="version_switcher_placeholder">2.7.x</span>
          <a href="../index.html">Documentation</a> &#187;
        </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python 標準ライブラリ</a> &#187;</li> 
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">著作権</a> 1990-2017, Python Software Foundation (translated by Python ドキュメント日本語翻訳プロジェクト).
    <br />
    The Python Software Foundation is a non-profit corporation.
    <a href="https://www.python.org/psf/donations/">Please donate.</a>
    <br />
    Last updated on 2017-02-16.
    <a href="../bugs.html">Found a bug</a>?
    <br />
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.9.
    </div>

  </body>
</html>