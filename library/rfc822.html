
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>18.11. rfc822 — RFC 2822 準拠のメールヘッダ読み出し &#8212; Python 2.7.14 ドキュメント</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.7.14',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Python 2.7.14 ドキュメント 内を検索"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="18.12. base64 — RFC 3548: Base16, Base32, Base64 データの符号化" href="base64.html" />
    <link rel="prev" title="18.10. multifile — 個別の部分を含んだファイル群のサポート" href="multifile.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    <link rel="canonical" href="https://docs.python.jp/3/library/rfc822.html" />
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script type="text/javascript" src="../_static/_jp.js"></script>
    
    
    <script type="text/javascript" src="../_static/version_switch.js"></script>
 
    

  </head>
  <body>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="base64.html" title="18.12. base64 — RFC 3548: Base16, Base32, Base64 データの符号化"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="multifile.html" title="18.10. multifile — 個別の部分を含んだファイル群のサポート"
             accesskey="P">前へ</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="http://www.python.jp/">Python</a> &#187;</li>
        <li>
          <span class="version_switcher_placeholder">2.7.14</span>
          <a href="../index.html">ドキュメント</a> &#187;
        </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python 標準ライブラリ</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="netdata.html" accesskey="U">18. インターネット上のデータの操作</a> &#187;</li> 
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-rfc822">
<span id="rfc822-parse-rfc-2822-mail-headers"></span><h1>18.11. <a class="reference internal" href="#module-rfc822" title="rfc822: Parse 2822 style mail messages. (非推奨)"><code class="xref py py-mod docutils literal"><span class="pre">rfc822</span></code></a> — RFC 2822 準拠のメールヘッダ読み出し<a class="headerlink" href="#module-rfc822" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="deprecated">
<p><span class="versionmodified">バージョン 2.3 で撤廃: </span><a class="reference internal" href="#module-rfc822" title="rfc822: Parse 2822 style mail messages. (非推奨)"><code class="xref py py-mod docutils literal"><span class="pre">rfc822</span></code></a> モジュールを使うよりも <a class="reference internal" href="email.html#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> パッケージを使うべきです。このモジュールは以前のバージョンとの互換性のために保守されているにすぎません。 Python 3 ではこのモジュールは削除されました。</p>
</div>
<p>このモジュールでは、インターネット標準 <span class="target" id="index-28"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a> <a class="footnote-reference" href="#id4" id="id1">[1]</a> で定義されている &quot;電子メールメッセージ&quot; を表現するクラス、 <a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal"><span class="pre">Message</span></code></a> を定義しています。このメッセージはメッセージヘッダ群とメッセージボディの集まりからなります。このモジュールではまた、ヘルパークラス <span class="target" id="index-29"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a> アドレス群を解釈するための <a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal"><span class="pre">AddressList</span></code></a> クラスを定義しています。 <span class="target" id="index-30"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a> メッセージ固有の構文に関する情報は RFC を参照してください。</p>
<p id="index-3"><a class="reference internal" href="mailbox.html#module-mailbox" title="mailbox: Manipulate mailboxes in various formats"><code class="xref py py-mod docutils literal"><span class="pre">mailbox</span></code></a> モジュールでは、多くのエンドユーザメールプログラムによって生成されるメールボックスを読み出すためのクラスを提供しています。</p>
<dl class="class">
<dt id="rfc822.Message">
<em class="property">class </em><code class="descclassname">rfc822.</code><code class="descname">Message</code><span class="sig-paren">(</span><em>file</em><span class="optional">[</span>, <em>seekable</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal"><span class="pre">Message</span></code></a> インスタンスは入力オブジェクトをパラメタに与えてインスタンス化します。入力オブジェクトのメソッドのうち、Message が依存するのは <a class="reference internal" href="readline.html#module-readline" title="readline: GNU readline support for Python. (Unix)"><code class="xref py py-meth docutils literal"><span class="pre">readline()</span></code></a> だけです; 通常のファイルオブジェクトは適格です。インスタンス化を行うと、入力オブジェクトからデリミタ行 (通常は空行 1 行) に到達するまでヘッダを読み出し、それらをインスタンス中に保持します。ヘッダの後のメッセージ本体は読み出しません。</p>
<p>このクラスは <a class="reference internal" href="readline.html#module-readline" title="readline: GNU readline support for Python. (Unix)"><code class="xref py py-meth docutils literal"><span class="pre">readline()</span></code></a> メソッドをサポートする任意の入力オブジェクトを扱うことができます。入力オブジェクトが seek および tell できる場合、 <a class="reference internal" href="#rfc822.Message.rewindbody" title="rfc822.Message.rewindbody"><code class="xref py py-meth docutils literal"><span class="pre">rewindbody()</span></code></a> メソッドが動作します。また、不正な行データを入力ストリームにプッシュバックできます。入力オブジェクトが seek できない一方で、入力行をプッシュバックする <code class="xref py py-meth docutils literal"><span class="pre">unread()</span></code> メソッドを持っている場合、 <a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal"><span class="pre">Message</span></code></a> は不正な行データにこのプッシュバックを使います。こうして、このクラスはバッファされているストリームから来るメッセージを解釈するのに使うことができます。</p>
<p>オプションの <em>seekable</em> 引数は、 <code class="xref c c-func docutils literal"><span class="pre">lseek()</span></code> システムコールが動作しないと分かるまでは <code class="xref c c-func docutils literal"><span class="pre">tell()</span></code> がバッファされたデータを無視するような、ある種の stdio ライブラリでの回避手段として提供されています。可搬性を最大にするために、socket オブジェクトによって生成されたファイルのような、seek できないオブジェクトを渡す際には、最初に <code class="xref py py-meth docutils literal"><span class="pre">tell()</span></code> が呼び出されないようにするために seekable 引数をゼロに設定すべきです。</p>
<p>ファイルとして読み出された入力行データは CR-LF と単一の改行 (line feed) のどちらで終端されていてもかまいません; 行データを記憶する前に、終端の CR-LF は単一の改行と置き換えられます。</p>
<p>ヘッダに対するマッチは全て大小文字に依存しません。例えば、 <code class="docutils literal"><span class="pre">m['From']</span></code> 、 <code class="docutils literal"><span class="pre">m['from']</span></code> 、および <code class="docutils literal"><span class="pre">m['FROM']</span></code> は全て同じ結果になります。</p>
</dd></dl>

<dl class="class">
<dt id="rfc822.AddressList">
<em class="property">class </em><code class="descclassname">rfc822.</code><code class="descname">AddressList</code><span class="sig-paren">(</span><em>field</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.AddressList" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><span class="target" id="index-31"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2833.html"><strong>RFC 2833</strong></a> アドレスがカンマで区切られたものとして解釈できる単一の文字列パラメタを使って、 <a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal"><span class="pre">AddressList</span></code></a> ヘルパークラスをインスタンス化することができます。 (パラメタ <code class="docutils literal"><span class="pre">None</span></code> は空のリストを表します。)</p>
</dd></dl>

<dl class="function">
<dt id="rfc822.quote">
<code class="descclassname">rfc822.</code><code class="descname">quote</code><span class="sig-paren">(</span><em>str</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.quote" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>str</em> 中のバックスラッシュが 2 つのバックスラッシュに置き換えられ、二重引用符がバックスラッシュ付きの二重引用符に置き換えられた、新たな文字列を返します。</p>
</dd></dl>

<dl class="function">
<dt id="rfc822.unquote">
<code class="descclassname">rfc822.</code><code class="descname">unquote</code><span class="sig-paren">(</span><em>str</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.unquote" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>文字列 <em>str</em> を <em>逆クォート</em> した新しい文字列を返します。もし <em>str</em> の先頭あるいは末尾がダブルクォートだった場合、これらは単に切りおとされます。同様にもし <em>str</em> の先頭あるいは末尾が角ブラケット (&lt;、&gt;) だった場合も切りおとされます。</p>
</dd></dl>

<dl class="function">
<dt id="rfc822.parseaddr">
<code class="descclassname">rfc822.</code><code class="descname">parseaddr</code><span class="sig-paren">(</span><em>address</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.parseaddr" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em class="mailheader">To</em> や <em class="mailheader">Cc</em> といった、アドレスが入っているフィールドの値 <em>address</em> を解析し、含まれている &quot;実名 (realname)&quot; 部分および &quot;電子メールアドレス&quot; 部分に分けます。それらの情報からなるタプルを返します。解析が失敗した場合には 2 要素のタプル <code class="docutils literal"><span class="pre">(None,</span> <span class="pre">None)</span></code> を返します。</p>
</dd></dl>

<dl class="function">
<dt id="rfc822.dump_address_pair">
<code class="descclassname">rfc822.</code><code class="descname">dump_address_pair</code><span class="sig-paren">(</span><em>pair</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.dump_address_pair" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#rfc822.parseaddr" title="rfc822.parseaddr"><code class="xref py py-meth docutils literal"><span class="pre">parseaddr()</span></code></a> の逆で、実名と電子メールアドレスからなる 2要素のタプル<code class="docutils literal"><span class="pre">(realname,</span> <span class="pre">email_address)</span></code> を引数にとり、 <em class="mailheader">To</em> あるいは <em class="mailheader">Cc</em> ヘッダに適した形式の文字列を返します。タプル <em>pair</em> の第1要素が偽である場合、第2要素の値をそのまま返します。</p>
</dd></dl>

<dl class="function">
<dt id="rfc822.parsedate">
<code class="descclassname">rfc822.</code><code class="descname">parsedate</code><span class="sig-paren">(</span><em>date</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.parsedate" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><span class="target" id="index-32"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a> の規則に従っている日付を解析しようと試みます。しかしながら、メーラによっては <span class="target" id="index-33"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a> で指定されているような書式に従わないため、そのような場合には <code class="xref py py-func docutils literal"><span class="pre">parsedata()</span></code> は正しい日付を推測しようと試みます。 <em>date</em> は <code class="docutils literal"><span class="pre">'Mon,</span> <span class="pre">20</span> <span class="pre">Nov</span> <span class="pre">1995</span> <span class="pre">19:12:08</span> <span class="pre">-0500'</span></code> のような <span class="target" id="index-34"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a> 様式の日付を収めた文字列です。日付の解析に成功した場合、 <a class="reference internal" href="#rfc822.parsedate" title="rfc822.parsedate"><code class="xref py py-func docutils literal"><span class="pre">parsedate()</span></code></a> は <a class="reference internal" href="time.html#time.mktime" title="time.mktime"><code class="xref py py-func docutils literal"><span class="pre">time.mktime()</span></code></a> にそのまま渡すことができるような 9 要素のタプルを返します; そうでない場合には <code class="docutils literal"><span class="pre">None</span></code> を返します。結果のインデックス 6、7、および 8 は有用な情報ではありません。</p>
</dd></dl>

<dl class="function">
<dt id="rfc822.parsedate_tz">
<code class="descclassname">rfc822.</code><code class="descname">parsedate_tz</code><span class="sig-paren">(</span><em>date</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.parsedate_tz" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#rfc822.parsedate" title="rfc822.parsedate"><code class="xref py py-func docutils literal"><span class="pre">parsedate()</span></code></a> と同じ機能を実現しますが、 <code class="docutils literal"><span class="pre">None</span></code> または 10 要素のタプルを返します; 最初の 9 要素は <a class="reference internal" href="time.html#time.mktime" title="time.mktime"><code class="xref py py-func docutils literal"><span class="pre">time.mktime()</span></code></a> に直接渡すことができるようなタプルで、 10 番目の要素はその日のタイムゾーンにおける UTC (グリニッチ標準時の公式名称) からのオフセットです。(タイムゾーンオフセットの符号は、同じタイムゾーンにおける <code class="docutils literal"><span class="pre">time.timezone</span></code> 変数の符号と反転しています; 後者の変数が POSIX 標準に従っている一方、このモジュールは <span class="target" id="index-35"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a> に従っているからです。) 入力文字列がタイムゾーン情報を持たない場合、タプルの最後の要素は <code class="docutils literal"><span class="pre">None</span></code> になります。結果のインデックス 6、7、および 8 は有用な情報ではありません。</p>
</dd></dl>

<dl class="function">
<dt id="rfc822.mktime_tz">
<code class="descclassname">rfc822.</code><code class="descname">mktime_tz</code><span class="sig-paren">(</span><em>tuple</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.mktime_tz" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><code class="xref py py-func docutils literal"><span class="pre">parsedata_tz()</span></code> が返す 10 要素のタプルを UTC タイムスタンプに変換します。タプル内のタイムゾーン要素が <code class="docutils literal"><span class="pre">None</span></code> の場合、地域の時刻を表しているものと仮定します。些細な欠陥: この関数はまず最初の 8 要素を地域における時刻として変換し、次にタイムゾーンの違いに対する補償を行います; これにより、夏時間の切り替え日前後でちょっとしたエラーが生じるかもしれません。通常の利用に関しては心配ありません。</p>
</dd></dl>

<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<dl class="last docutils">
<dt><a class="reference internal" href="email.html#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> モジュール</dt>
<dd>包括的な e-mail 処理パッケージです。 <a class="reference internal" href="#module-rfc822" title="rfc822: Parse 2822 style mail messages. (非推奨)"><code class="xref py py-mod docutils literal"><span class="pre">rfc822</span></code></a> に取って代わります。</dd>
<dt><a class="reference internal" href="mailbox.html#module-mailbox" title="mailbox: Manipulate mailboxes in various formats"><code class="xref py py-mod docutils literal"><span class="pre">mailbox</span></code></a> モジュール</dt>
<dd>エンドユーザのメールプログラムによって生成される、様々な mailbox 形式を読み出すためのクラス群。</dd>
<dt><a class="reference internal" href="mimetools.html#module-mimetools" title="mimetools: Tools for parsing MIME-style message bodies. (非推奨)"><code class="xref py py-mod docutils literal"><span class="pre">mimetools</span></code></a> モジュール</dt>
<dd>MIME エンコードされたメッセージを処理する <a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal"><span class="pre">rfc822.Message</span></code></a> のサブクラス。</dd>
</dl>
</div>
<div class="section" id="message-objects">
<span id="id2"></span><h2>18.11.1. Message オブジェクト<a class="headerlink" href="#message-objects" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal"><span class="pre">Message</span></code></a> インスタンスは以下のメソッドを持っています:</p>
<dl class="method">
<dt id="rfc822.Message.rewindbody">
<code class="descclassname">Message.</code><code class="descname">rewindbody</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.rewindbody" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>メッセージ本体の先頭に seek します。このメソッドはファイルオブジェクトが seek 可能である場合にのみ動作します。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.isheader">
<code class="descclassname">Message.</code><code class="descname">isheader</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.isheader" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ある行が正しい <span class="target" id="index-36"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a> ヘッダである場合、その行の正規化されたフィールド名 (インデクス指定の際に使われる辞書キー) を返します; そうでない場合 <code class="docutils literal"><span class="pre">None</span></code> を返します (解析をここで一度中断し、行データを入力ストリームに押し戻すことを意味します)。このメソッドをサブクラスで上書きすると便利なことがあります。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.islast">
<code class="descclassname">Message.</code><code class="descname">islast</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.islast" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>与えられた line が Message の区切りとなるデリミタであった場合に真を返します。このデリミタ行は消費され、ファイルオブジェクトの読み位置はその直後になります。標準ではこのメソッドは単にその行が空行かどうかをチェックしますが、サブクラスで上書きすることもできます。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.iscomment">
<code class="descclassname">Message.</code><code class="descname">iscomment</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.iscomment" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>与えられた行全体を無視し、単に読み飛ばすときに真を返します。標準では、これは控えメソッド (stub) であり、常に <code class="docutils literal"><span class="pre">False</span></code> を返しますが、サブクラスで上書きすることもできます。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.getallmatchingheaders">
<code class="descclassname">Message.</code><code class="descname">getallmatchingheaders</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.getallmatchingheaders" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>name</em> に一致するヘッダ全てで構成される行のリストを返します。各物理行は継続行であるか否かに関わらず別々のリスト要素になります。 <em>name</em> に一致するヘッダがない場合、空のリストを返します。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.getfirstmatchingheader">
<code class="descclassname">Message.</code><code class="descname">getfirstmatchingheader</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.getfirstmatchingheader" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>name</em> に一致する最初のヘッダと、その行に継続する (複数) 行からなる行データのリストを返します。 <em>name</em> に一致するヘッダがない場合 <code class="docutils literal"><span class="pre">None</span></code> を返します。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.getrawheader">
<code class="descclassname">Message.</code><code class="descname">getrawheader</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.getrawheader" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>name</em> に一致する最初のヘッダにおけるコロン以降のテキストが入った単一の文字列を返します。このテキストには、先頭の空白、末尾の改行、また継続の行がある場合には途中の改行と空白が含まれます。 <em>name</em> に一致するヘッダが存在しない場合には <code class="docutils literal"><span class="pre">None</span></code> を返します。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.getheader">
<code class="descclassname">Message.</code><code class="descname">getheader</code><span class="sig-paren">(</span><em>name</em><span class="optional">[</span>, <em>default</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.getheader" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>name</em> に一致する最後のヘッダから先頭および末尾の空白を剥ぎ取った単一の文字列を返します。途中にある空白は剥ぎ取られません。オプションの <em>default</em> 引数は、 <em>name</em> に一致するヘッダが存在しない場合に、別のデフォルト値を返すように指定するために使われます。デフォルトは <code class="docutils literal"><span class="pre">None</span></code> です。パースされたヘッダを得る方法としてはこれが好ましいでしょう。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.get">
<code class="descclassname">Message.</code><code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="optional">[</span>, <em>default</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.get" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>正規の辞書との互換性をより高めるための <a class="reference internal" href="#rfc822.Message.getheader" title="rfc822.Message.getheader"><code class="xref py py-meth docutils literal"><span class="pre">getheader()</span></code></a> の別名です。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.getaddr">
<code class="descclassname">Message.</code><code class="descname">getaddr</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.getaddr" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">getheader(name)</span></code> が返した文字列を解析して、 <code class="docutils literal"><span class="pre">(full</span> <span class="pre">name,</span> <span class="pre">email</span> <span class="pre">address)</span></code> からなるペアを返します。 <em>name</em> に一致するヘッダが無い場合、 <code class="docutils literal"><span class="pre">(None,</span> <span class="pre">None)</span></code> が返されます; そうでない場合、 <em>full name</em> および <em>address</em> は (空文字列をとりうる) 文字列になります。</p>
<p>例: <em>m</em> に最初の <em class="mailheader">From</em> ヘッダに文字列 <code class="docutils literal"><span class="pre">'jack&#64;cwi.nl</span> <span class="pre">(Jack</span> <span class="pre">Jansen)'</span></code> が入っている場合、 <code class="docutils literal"><span class="pre">m.getaddr('From')</span></code> はペア <code class="docutils literal"><span class="pre">('Jack</span> <span class="pre">Jansen',</span> <span class="pre">'jack&#64;cwi.nl')</span></code> になります。また、 <code class="docutils literal"><span class="pre">'Jack</span> <span class="pre">Jansen</span> <span class="pre">&lt;jack&#64;cwi.nl&gt;'</span></code> であっても、全く同じ結果になります。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.getaddrlist">
<code class="descclassname">Message.</code><code class="descname">getaddrlist</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.getaddrlist" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">getaddr(list)</span></code> に似ていますが、複数のメールアドレスからなるリストが入ったヘッダ (例えば <em class="mailheader">To</em> ヘッダ) を解析し、 <code class="docutils literal"><span class="pre">(full</span> <span class="pre">name,</span> <span class="pre">email</span> <span class="pre">address)</span></code> のペアからなるリストを (たとえヘッダには一つしかアドレスが入っていなかったとしても) 返します。 <em>name</em> に一致するヘッダが無かった場合、空のリストを返します。</p>
<p>指定された名前に一致する複数のヘッダが存在する場合 (例えば、複数の <em class="mailheader">Cc</em> ヘッダが存在する場合)、全てのアドレスを解析します。指定されたヘッダが継続行で収められている場合も解析されます。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.getdate">
<code class="descclassname">Message.</code><code class="descname">getdate</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.getdate" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#rfc822.Message.getheader" title="rfc822.Message.getheader"><code class="xref py py-meth docutils literal"><span class="pre">getheader()</span></code></a> を使ってヘッダを取得して解析し、 <a class="reference internal" href="time.html#time.mktime" title="time.mktime"><code class="xref py py-func docutils literal"><span class="pre">time.mktime()</span></code></a> と互換な 9 要素のタプルにします; フィールド 6、7、および 8 は有用な値ではないので注意して下さい。 <em>name</em> に一致するヘッダが存在しなかったり、ヘッダが解析不能であった場合、 <code class="docutils literal"><span class="pre">None</span></code> を返します。</p>
<p>日付の解析は黒魔術のようなものであり、全てのヘッダが標準に従っているとは限りません。このメソッドは多くの発信源から集められた膨大な数の電子メールでテストされており、正しく動作することが分かっていますが、間違った結果を出力してしまう可能性はまだあります。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.getdate_tz">
<code class="descclassname">Message.</code><code class="descname">getdate_tz</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.getdate_tz" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#rfc822.Message.getheader" title="rfc822.Message.getheader"><code class="xref py py-meth docutils literal"><span class="pre">getheader()</span></code></a> を使ってヘッダを取得して解析し、10 要素のタプルにします; 最初の 9 要素は <a class="reference internal" href="time.html#time.mktime" title="time.mktime"><code class="xref py py-func docutils literal"><span class="pre">time.mktime()</span></code></a> と互換性のあるタプルを形成し、10 番目の要素はその日におけるタイムゾーンの UTC からのオフセットを与える数字になります。フィールド 6、7、および 8 は有用な値ではないので注意して下さい。 <a class="reference internal" href="#rfc822.Message.getdate" title="rfc822.Message.getdate"><code class="xref py py-meth docutils literal"><span class="pre">getdate()</span></code></a> と同様に、 <em>name</em> に一致するヘッダがなかったり、解析不能であった場合、 <code class="docutils literal"><span class="pre">None</span></code> を返します。</p>
</dd></dl>

<p><a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal"><span class="pre">Message</span></code></a> インスタンスはまた、限定的なマップ型のインタフェースを持っています。すなわち: <code class="docutils literal"><span class="pre">m[name]</span></code> は <code class="docutils literal"><span class="pre">m.getheader(name)</span></code> に似ていますが、一致するヘッダがない場合 <a class="reference internal" href="exceptions.html#exceptions.KeyError" title="exceptions.KeyError"><code class="xref py py-exc docutils literal"><span class="pre">KeyError</span></code></a> を送出します; <code class="docutils literal"><span class="pre">len(m)</span></code> 、 <code class="docutils literal"><span class="pre">m.get(name[,</span> <span class="pre">default])</span></code> 、 <code class="docutils literal"><span class="pre">name</span> <span class="pre">in</span> <span class="pre">m</span></code>, <code class="docutils literal"><span class="pre">m.keys()</span></code> 、 <code class="docutils literal"><span class="pre">m.values()</span></code> 、 <code class="docutils literal"><span class="pre">m.items()</span></code> 、および <code class="docutils literal"><span class="pre">m.setdefault(name[,</span> <span class="pre">default])</span></code> は期待通りに動作します。ただし <code class="xref py py-meth docutils literal"><span class="pre">setdefault()</span></code> は標準の設定値として空文字列をとります。 <a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal"><span class="pre">Message</span></code></a> インスタンスはまた、マップ型への書き込みを行えるインタフェース <code class="docutils literal"><span class="pre">m[name]</span> <span class="pre">=</span> <span class="pre">value</span></code> および <code class="docutils literal"><span class="pre">del</span> <span class="pre">m[name]</span></code> をサポートしています。 <a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal"><span class="pre">Message</span></code></a> オブジェクトでは、 <code class="xref py py-meth docutils literal"><span class="pre">clear()</span></code> 、 <a class="reference internal" href="copy.html#module-copy" title="copy: Shallow and deep copy operations."><code class="xref py py-meth docutils literal"><span class="pre">copy()</span></code></a> 、 <code class="xref py py-meth docutils literal"><span class="pre">popitem()</span></code> 、あるいは <code class="xref py py-meth docutils literal"><span class="pre">update()</span></code> といったマップ型インタフェースのメソッドはサポートしていません。 (<code class="xref py py-meth docutils literal"><span class="pre">get()</span></code> および <code class="xref py py-meth docutils literal"><span class="pre">setdefault()</span></code> のサポートは Python 2.2 でしか追加されていません。)</p>
<p>最後に、 <a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal"><span class="pre">Message</span></code></a> インスタンスはいくつかの public なインスタンス変数を持っています:</p>
<dl class="attribute">
<dt id="rfc822.Message.headers">
<code class="descclassname">Message.</code><code class="descname">headers</code><a class="headerlink" href="#rfc822.Message.headers" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ヘッダ行のセット全体が、(setitem を呼び出して変更されない限り) 読み出された順番に入れられたリストです。各行は末尾の改行を含んでいます。ヘッダを終端する空行はリストに含まれません。</p>
</dd></dl>

<dl class="attribute">
<dt id="rfc822.Message.fp">
<code class="descclassname">Message.</code><code class="descname">fp</code><a class="headerlink" href="#rfc822.Message.fp" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>インスタンス化の際に渡されたファイルまたはファイル類似オブジェクトです。この値はメッセージ本体を読み出すために使うことができます。</p>
</dd></dl>

<dl class="attribute">
<dt id="rfc822.Message.unixfrom">
<code class="descclassname">Message.</code><code class="descname">unixfrom</code><a class="headerlink" href="#rfc822.Message.unixfrom" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>メッセージに Unix <code class="docutils literal"><span class="pre">From</span></code> 行がある場合はその行、そうでなければ空文字列になります。この値は例えば <code class="docutils literal"><span class="pre">mbox</span></code> 形式のメールボックスファイルのような、あるコンテキスト中のメッセージを再生成するために必要です。</p>
</dd></dl>

</div>
<div class="section" id="addresslist-objects">
<span id="id3"></span><h2>18.11.2. AddressList オブジェクト<a class="headerlink" href="#addresslist-objects" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal"><span class="pre">AddressList</span></code></a> インスタンスは以下のメソッドを持ちます:</p>
<dl class="method">
<dt id="rfc822.AddressList.__len__">
<code class="descclassname">AddressList.</code><code class="descname">__len__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.AddressList.__len__" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>アドレスリスト中のアドレスの数を返します。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.AddressList.__str__">
<code class="descclassname">AddressList.</code><code class="descname">__str__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.AddressList.__str__" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>アドレスリストの正規化 (canonicalize) された文字列表現を返します。アドレスはカンマで分割された &quot;name&quot; &lt;<a class="reference external" href="mailto:host&#37;&#52;&#48;domain">host<span>&#64;</span>domain</a>&gt; 形式になります。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.AddressList.__add__">
<code class="descclassname">AddressList.</code><code class="descname">__add__</code><span class="sig-paren">(</span><em>alist</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.AddressList.__add__" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>二つの <a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal"><span class="pre">AddressList</span></code></a> 被演算子中の双方に含まれるアドレスについて、重複を除いた (集合和の) 全てのアドレスを含む新たな <a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal"><span class="pre">AddressList</span></code></a> インスタンスを返します。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.AddressList.__iadd__">
<code class="descclassname">AddressList.</code><code class="descname">__iadd__</code><span class="sig-paren">(</span><em>alist</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.AddressList.__iadd__" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#rfc822.AddressList.__add__" title="rfc822.AddressList.__add__"><code class="xref py py-meth docutils literal"><span class="pre">__add__()</span></code></a> のインプレース演算版です; <a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal"><span class="pre">AddressList</span></code></a> インスタンスと右辺値 <em>alist</em> との集合和をとり、その結果をインスタンス自体と置き換えます。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.AddressList.__sub__">
<code class="descclassname">AddressList.</code><code class="descname">__sub__</code><span class="sig-paren">(</span><em>alist</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.AddressList.__sub__" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>左辺値の <a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal"><span class="pre">AddressList</span></code></a> インスタンスのアドレスのうち、右辺値中に含まれていないもの全てを含む (集合差分の) 新たな <a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal"><span class="pre">AddressList</span></code></a> インスタンスを返します。</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.AddressList.__isub__">
<code class="descclassname">AddressList.</code><code class="descname">__isub__</code><span class="sig-paren">(</span><em>alist</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.AddressList.__isub__" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#rfc822.AddressList.__sub__" title="rfc822.AddressList.__sub__"><code class="xref py py-meth docutils literal"><span class="pre">__sub__()</span></code></a> のインプレース演算版で、 <em>alist</em> にも含まれているアドレスを削除します。</p>
</dd></dl>

<p>最後に、 <a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal"><span class="pre">AddressList</span></code></a> インスタンスは public なインスタンス変数を一つ持ちます:</p>
<dl class="attribute">
<dt id="rfc822.AddressList.addresslist">
<code class="descclassname">AddressList.</code><code class="descname">addresslist</code><a class="headerlink" href="#rfc822.AddressList.addresslist" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>アドレスあたり一つの文字列ペアで構成されるタプルからなるリストです。各メンバ中では、最初の要素は正規化された名前部分で、二つ目は実際の配送アドレス (<code class="docutils literal"><span class="pre">'&#64;'</span></code> で分割されたユーザ名とホスト.ドメインからなるペア) です。</p>
</dd></dl>

<p class="rubric">脚注</p>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>このモジュールはもともと <span class="target" id="index-37"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc822.html"><strong>RFC 822</strong></a> に適合していたので、そういう名前になっています。その後、 <span class="target" id="index-38"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a> が <span class="target" id="index-39"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc822.html"><strong>RFC 822</strong></a> に対する更新としてリリースされました。このモジュールは <span class="target" id="index-40"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a> 適合であり、特に <span class="target" id="index-41"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc822.html"><strong>RFC 822</strong></a> からの構文や意味付けに対する変更がなされています。</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">18.11. <code class="docutils literal"><span class="pre">rfc822</span></code> — RFC 2822 準拠のメールヘッダ読み出し</a><ul>
<li><a class="reference internal" href="#message-objects">18.11.1. Message オブジェクト</a></li>
<li><a class="reference internal" href="#addresslist-objects">18.11.2. AddressList オブジェクト</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="multifile.html"
                        title="前の章へ">18.10. <code class="docutils literal"><span class="pre">multifile</span></code> — 個別の部分を含んだファイル群のサポート</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="base64.html"
                        title="次の章へ">18.12. <code class="docutils literal"><span class="pre">base64</span></code> — RFC 3548: Base16, Base32, Base64 データの符号化</a></p>
<h3>このページ</h3>
<ul class="this-page-menu">
  <li><a href="../bugs.html">バグ報告</a></li>
  <li><a href="https://github.com/python/cpython/blob/2.7/Doc/library/rfc822.rst"
         rel="nofollow">ソースの表示</a>
  </li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="検索" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="base64.html" title="18.12. base64 — RFC 3548: Base16, Base32, Base64 データの符号化"
             >次へ</a> |</li>
        <li class="right" >
          <a href="multifile.html" title="18.10. multifile — 個別の部分を含んだファイル群のサポート"
             >前へ</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="http://www.python.jp/">Python</a> &#187;</li>
        <li>
          <span class="version_switcher_placeholder">2.7.14</span>
          <a href="../index.html">ドキュメント</a> &#187;
        </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python 標準ライブラリ</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="netdata.html" >18. インターネット上のデータの操作</a> &#187;</li> 
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 1990-2018, Python Software Foundation (translated by Python ドキュメント日本語翻訳プロジェクト).
    <br />
    Python Software Foundation は非営利団体です。
    <a href="https://www.python.org/psf/donations/">寄付</a>
    <br />
    最終更新日時: 2018-06-20
    <a href="../bugs.html">バグを見つけたら</a>?
    <br />
    このドキュメントは <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.6.5 を使って作成されました。
    </div>

  </body>
</html>